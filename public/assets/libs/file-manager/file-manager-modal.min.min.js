(function(b){b.fn.fileManagerModal=function(e,a){b(this).each(function(){if(b(this).hasClass("has-file-manager-modal")){return true}e=e||"image";if(e==="image"||e==="images"){e="Images"}else{e="Files"}b(this).on("click",function(c){let that=b(this);let route_prefix=(a&&a.prefix)?a.prefix:"/file-manager";let iframe=b("#file-manager-modal").find(".file-manager-iframe");let fileManagerOptions={modal:true};let data=that.dataStartsWith("file-manager");fileManagerOptions=b.extend(fileManagerOptions,data);var h=route_prefix;window.fileManagerModalOptions=fileManagerOptions;iframe.contents().find("html").html("");iframe.attr("src",h);b("#file-manager-modal").modal();return false});b(this).addClass("has-file-manager-modal")});return this}})(jQuery);function encodeQueryData(b){let ret=[];for(let d in b){ret.push(encodeURIComponent(d)+"="+encodeURIComponent(b[d]))}return ret.join("&")}function closeFileManagerModal(){$("#file-manager-modal").modal("hide")}function SetUrl(f,i){var h=$("#"+localStorage.getItem("target_input"));h.val(i);var g=$("#"+localStorage.getItem("target_preview"));g.attr("src",f);setTimeout(localStorage.getItem("callback"),1)};