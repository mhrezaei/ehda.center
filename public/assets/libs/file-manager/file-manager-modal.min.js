(function(a){a.fn.fileManagerModal=function(c,b){c=c||"image";if(c==="image"||c==="images"){c="Images"}else{c="Files"}this.on("click",function(g){let route_prefix=(b&&b.prefix)?b.prefix:"/file-manager";let queryData={modal:true};if(a(this).data("input")){queryData.field_name=a(this).data("input")}if(a(this).data("preview")){queryData.field_preview=a(this).data("preview")}let queryString=encodeQueryData(queryData);if(queryData){var f=route_prefix+"?"+queryString}else{var f=route_prefix}a("#file-manager-modal").find(".file-manager-iframe").attr("src",f);a("#file-manager-modal").modal();return false});return this}})(jQuery);function encodeQueryData(a){let ret=[];for(let d in a){ret.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]))}return ret.join("&")}function closeFileManagerModal(){$("#file-manager-modal").modal("hide")}function SetUrl(b,c){var e=$("#"+localStorage.getItem("target_input"));e.val(c);var a=$("#"+localStorage.getItem("target_preview"));a.attr("src",b);setTimeout(localStorage.getItem("callback"),1)};