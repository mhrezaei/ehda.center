(function(a){a.fn.fileManagerModal=function(c,b){a(this).each(function(){if(a(this).hasClass("has-file-manager-modal")){return true}c=c||"image";if(c==="image"||c==="images"){c="Images"}else{c="Files"}a(this).on("click",function(g){let that=a(this);let route_prefix=(b&&b.prefix)?b.prefix:"/file-manager";let iframe=a("#file-manager-modal").find(".file-manager-iframe");let fileManagerOptions={modal:true};let data=that.dataStartsWith("file-manager");fileManagerOptions=a.extend(fileManagerOptions,data);var f=route_prefix;window.fileManagerModalOptions=fileManagerOptions;iframe.contents().find("html").html("");iframe.attr("src",f);a("#file-manager-modal").modal();return false});a(this).addClass("has-file-manager-modal")});return this}})(jQuery);function encodeQueryData(a){let ret=[];for(let d in a){ret.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]))}return ret.join("&")}function closeFileManagerModal(){$("#file-manager-modal").modal("hide")}function SetUrl(b,c){var e=$("#"+localStorage.getItem("target_input"));e.val(c);var a=$("#"+localStorage.getItem("target_preview"));a.attr("src",b);setTimeout(localStorage.getItem("callback"),1)};