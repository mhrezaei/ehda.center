$(document).ready(function(){lowLag.init({urlPrefix:siteUrl+"/assets/sound/"});lowLag.load(["heartSound.mp3","heartSound.ogg"],"pluck1");$.ajax({type:"GET",url:siteUrl+"/files/ecg/xmls/data.xml",dataType:"xml",success:function(a){xml_data=a;$(".rhy_item.selected").click()},error:function(){alert("An error occurred while processing XML file.")}});$(".rhy_item").click(function(){var a=$(this);var b=a.attr("id");clearInterval(sound_var);loadGraph(b)});$(".monitor-preview-diagram div.static-diagram").mouseenter(function(){$(this).css("animation-play-state","paused")}).mouseleave(function(){$(this).css("animation-play-state","running")})});var xml_data=null;var not_play=false;var play_sound=true;var sound_var=0;function loadGraph(e){var a=e.split("_");var b=a[1];assignHartRate(b);var c=String(a[0]).toLowerCase();changeGraphPreview(c);temp_str=String($(xml_data).find("rs").find(String(c)).text()).split(",");hr_abc=temp_str.length;var d=$(xml_data).find("item").eq(parseInt(a[2]));$(".rhy-title").html($.trim(d.find("data_title").text()));$(".rhy-description").html($.trim(d.find("data_des").text()));if(c=="r3"||c=="r15"||c=="r8"||c=="r19"){sound_var=setInterval(showCC1,20000/hr_abc)}else{sound_var=setInterval(showCC,10)}}function assignHartRate(a){$(".hr-value").html(a)}function changeGraphPreview(a){$(".monitor-preview-diagram div.static-diagram").attr("id",String(a).toLowerCase()+"rhy")}function showCC(){if(String($(".monitor-preview-diagram div.static-diagram").css("color"))!="rgb(255, 255, 255)"&&!not_play){not_play=true;playSound("heartsound");pulheart()}else{if(String($(".monitor-preview-diagram div.static-diagram").css("color"))=="rgb(255, 255, 255)"){not_play=false}}}function showCC1(){console.log("beating1");playSound("heartsound");pulheart()}function playSound(a){if(!play_sound){return false}switch(a){case"heartsound":lowLag.play("pluck1");break;case"wrong":boing.play();break;case"right":right1.play();break;case"wellDone":wellDone.play();break;case"helpMe":helpMe.play();break;case"congrats":congrats.play();break}}function pulheart(){$(".hr-value").addClass("pulse");var a=window.setTimeout(function(){$(".hr-value").removeClass("pulse")},200)};