(function(f){var d=null;function e(cp,bv){this.setupOptions={url:(cp||null),flashVersion:8,debugMode:true,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1000,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:true,noSWFCache:false};this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.movieID="sm2-container";this.id=(bv||"sm2movie");this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20120624";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.hasHTML5=(function(){try{return(typeof Audio!=="undefined"&&typeof new Audio().canPlayType!=="undefined")}catch(g){return false}}());this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var bt,cI=this,bf=null,cs="soundManager",cF=cs+"::",cm="HTML5::",cd,b7=navigator.userAgent,bj=f,bh=bj.location.href.toString(),co=document,b5,bT,cy,bq,bS=[],bg=true,b1,cB=false,a=false,ci=false,bF=false,c=false,bP,cl=0,bs,bU,cL,bi,cN,cJ,cE,bZ,a0,bA,cq,bz,a9,bC,bR,cu,cG,cj,cr,bQ,bG,ce=["log","info","warn","error"],bw=8,cg,bK,bn,bd=null,cD=null,cc,bm,bB,bX,bW,ca,bY,br,b4,cH=false,bI=false,b,bu,bO,b8=0,bb=null,ck,b0=null,b2,bM,cz,bc,cA,cv,cK,ba,bl=Array.prototype.slice,ch=false,bo,cM,cb,a8,bN,bH=b7.match(/(ipad|iphone|ipod)/i),bp=b7.match(/msie/i),be=b7.match(/webkit/i),bJ=(b7.match(/safari/i)&&!b7.match(/chrome/i)),bD=(b7.match(/opera/i)),cf=(b7.match(/(mobile|pre\/|xoom)/i)||bH),bL=(!bh.match(/usehtml5audio/i)&&!bh.match(/sm2\-ignorebadua/i)&&bJ&&!b7.match(/silk/i)&&b7.match(/OS X 10_6_([3-7])/i)),ct=(typeof console!=="undefined"&&typeof console.log!=="undefined"),cn=(typeof co.hasFocus!=="undefined"?co.hasFocus():null),b6=(bJ&&(typeof co.hasFocus==="undefined"||!co.hasFocus())),bE=!b6,bx=/(mp3|mp4|mpa|m4a)/i,bV="about:blank",cC=(co.location?co.location.protocol.match(/http/i):null),cx=(!cC?"http://":""),b3=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|mp4v|3gp|3g2)\s*(?:$|;)/i,cw=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","mp4v","3gp","3g2"],b9=new RegExp("\\.("+cw.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!cC;this._global_a=null;bX={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};if(cf){cI.useHTML5Audio=true;cI.preferFlash=false;if(bH){cI.ignoreFlash=true;ch=true}}this.setup=function(g){if(typeof g!=="undefined"&&ci&&b0&&cI.ok()&&(typeof g.flashVersion!=="undefined"||typeof g.url!=="undefined")){br(cc("setupLate"))}cL(g);return cI};this.ok=function(){return(b0?(ci&&!bF):(cI.useHTML5Audio&&cI.hasHTML5))};this.supported=this.ok;this.getMovie=function(g){return cd(g)||co[g]||bj[g]};this.createSound=function(n,k){var i,j,l=null,m=null,g=null;i=cs+".createSound(): ";j=i+cc(!ci?"notReady":"notOK");if(!ci||!cI.ok()){br(j);return false}if(typeof k!=="undefined"){n={id:n,url:k}}l=bU(n);l.url=ck(l.url);g=l;if(g.id.toString().charAt(0).match(/^[0-9]$/)){cI._wD(i+cc("badID",g.id),2)}cI._wD(i+g.id+" ("+g.url+")",1);if(b4(g.id,true)){cI._wD(i+g.id+" exists",1);return cI.sounds[g.id]}function h(){l=ca(l);cI.sounds[g.id]=new bt(g);cI.soundIDs.push(g.id);return cI.sounds[g.id]}if(bM(g)){m=h();cI._wD("Creating sound "+g.id+", using HTML5");m._setup_html5(g)}else{if(bq>8){if(g.isMovieStar===null){g.isMovieStar=!!(g.serverURL||(g.type?g.type.match(b3):false)||g.url.match(b9))}if(g.isMovieStar){cI._wD(i+"using MovieStar handling");if(g.loops>1){bP("noNSLoop")}}}g=bY(g,i);m=h();if(bq===8){bf._createSound(g.id,g.loops||1,g.usePolicyFile)}else{bf._createSound(g.id,g.url,g.usePeakData,g.useWaveformData,g.useEQData,g.isMovieStar,(g.isMovieStar?g.bufferTime:false),g.loops||1,g.serverURL,g.duration||null,g.autoPlay,true,g.autoLoad,g.usePolicyFile);if(!g.serverURL){m.connected=true;if(g.onconnect){g.onconnect.apply(m)}}}if(!g.serverURL&&(g.autoLoad||g.autoPlay)){m.load(g)}}if(!g.serverURL&&g.autoPlay){m.play()}return m};this.destroySound=function(h,i){if(!b4(h)){return false}var j=cI.sounds[h],g;j._iO={};j.stop();j.unload();for(g=0;g<cI.soundIDs.length;g++){if(cI.soundIDs[g]===h){cI.soundIDs.splice(g,1);break}}if(!i){j.destruct(true)}j=null;delete cI.sounds[h];return true};this.load=function(h,g){if(!b4(h)){return false}return cI.sounds[h].load(g)};this.unload=function(g){if(!b4(g)){return false}return cI.sounds[g].unload()};this.onPosition=function(i,j,g,h){if(!b4(i)){return false}return cI.sounds[i].onposition(j,g,h)};this.onposition=this.onPosition;this.clearOnPosition=function(i,g,h){if(!b4(i)){return false}return cI.sounds[i].clearOnPosition(g,h)};this.play=function(g,i){var h=false;if(!ci||!cI.ok()){br(cs+".play(): "+cc(!ci?"notReady":"notOK"));return h}if(!b4(g)){if(!(i instanceof Object)){i={url:i}}if(i&&i.url){cI._wD(cs+'.play(): attempting to create "'+g+'"',1);i.id=g;h=cI.createSound(i).play()}return h}return cI.sounds[g].play(i)};this.start=this.play;this.setPosition=function(h,g){if(!b4(h)){return false}return cI.sounds[h].setPosition(g)};this.stop=function(g){if(!b4(g)){return false}cI._wD(cs+".stop("+g+")",1);return cI.sounds[g].stop()};this.stopAll=function(){var g;cI._wD(cs+".stopAll()",1);for(g in cI.sounds){if(cI.sounds.hasOwnProperty(g)){cI.sounds[g].stop()}}};this.pause=function(g){if(!b4(g)){return false}return cI.sounds[g].pause()};this.pauseAll=function(){var g;for(g=cI.soundIDs.length-1;g>=0;g--){cI.sounds[cI.soundIDs[g]].pause()}};this.resume=function(g){if(!b4(g)){return false}return cI.sounds[g].resume()};this.resumeAll=function(){var g;for(g=cI.soundIDs.length-1;g>=0;g--){cI.sounds[cI.soundIDs[g]].resume()}};this.togglePause=function(g){if(!b4(g)){return false}return cI.sounds[g].togglePause()};this.setPan=function(h,g){if(!b4(h)){return false}return cI.sounds[h].setPan(g)};this.setVolume=function(g,h){if(!b4(g)){return false}return cI.sounds[g].setVolume(h)};this.mute=function(h){var g=0;if(typeof h!=="string"){h=null}if(!h){cI._wD(cs+".mute(): Muting all sounds");for(g=cI.soundIDs.length-1;g>=0;g--){cI.sounds[cI.soundIDs[g]].mute()}cI.muted=true}else{if(!b4(h)){return false}cI._wD(cs+'.mute(): Muting "'+h+'"');return cI.sounds[h].mute()}return true};this.muteAll=function(){cI.mute()};this.unmute=function(h){var g;if(typeof h!=="string"){h=null}if(!h){cI._wD(cs+".unmute(): Unmuting all sounds");for(g=cI.soundIDs.length-1;g>=0;g--){cI.sounds[cI.soundIDs[g]].unmute()}cI.muted=false}else{if(!b4(h)){return false}cI._wD(cs+'.unmute(): Unmuting "'+h+'"');return cI.sounds[h].unmute()}return true};this.unmuteAll=function(){cI.unmute()};this.toggleMute=function(g){if(!b4(g)){return false}return cI.sounds[g].toggleMute()};this.getMemoryUse=function(){var g=0;if(bf&&bq!==8){g=parseInt(bf._getMemoryUse(),10)}return g};this.disable=function(g){var h;if(typeof g==="undefined"){g=false}if(bF){return false}bF=true;bP("shutdown",1);for(h=cI.soundIDs.length-1;h>=0;h--){cg(cI.sounds[cI.soundIDs[h]])}bs(g);ba.remove(bj,"load",cE);return true};this.canPlayMIME=function(g){var h;if(cI.hasHTML5){h=cz({type:g})}if(!h&&b0){h=(g&&cI.ok()?!!((bq>8?g.match(b3):null)||g.match(cI.mimePattern)):null)}return h};this.canPlayURL=function(g){var h;if(cI.hasHTML5){h=cz({url:g})}if(!h&&b0){h=(g&&cI.ok()?!!(g.match(cI.filePattern)):null)}return h};this.canPlayLink=function(g){if(typeof g.type!=="undefined"&&g.type){if(cI.canPlayMIME(g.type)){return true}}return cI.canPlayURL(g.href)};this.getSoundById=function(g,i){if(!g){throw new Error(cs+".getSoundById(): sID is null/undefined")}var h=cI.sounds[g];if(!h&&!i){cI._wD('"'+g+'" is an invalid sound ID.',2)}return h};this.onready=function(j,g){var i="onready",h=false;if(typeof j==="function"){if(ci){cI._wD(cc("queue",i))}if(!g){g=bj}cN(i,j,g);cJ();h=true}else{throw cc("needFunction",i)}return h};this.ontimeout=function(j,g){var i="ontimeout",h=false;if(typeof j==="function"){if(ci){cI._wD(cc("queue",i))}if(!g){g=bj}cN(i,j,g);cJ({type:i});h=true}else{throw cc("needFunction",i)}return h};this._writeDebug=function(g,i,n){var j="soundmanager-debug",k,l,h;if(!cI.debugMode){return false}if(typeof n!=="undefined"&&n){g=g+" | "+new Date().getTime()}if(ct&&cI.useConsole){h=ce[i];if(typeof console[h]!=="undefined"){console[h](g)}else{console.log(g)}if(cI.consoleOnly){return true}}try{k=cd(j);if(!k){return false}l=co.createElement("div");if(++cl%2===0){l.className="sm2-alt"}if(typeof i==="undefined"){i=0}else{i=parseInt(i,10)}l.appendChild(co.createTextNode(g));if(i){if(i>=2){l.style.fontWeight="bold"}if(i===3){l.style.color="#ff3333"}}k.insertBefore(l,k.firstChild)}catch(m){}k=null;return true};this._wD=this._writeDebug;this._debug=function(){var g,h;bP("currentObj",1);for(g=0,h=cI.soundIDs.length;g<h;g++){cI.sounds[cI.soundIDs[g]]._debug()}};this.reboot=function(){cI._wD(cs+".reboot()");if(cI.soundIDs.length){cI._wD("Destroying "+cI.soundIDs.length+" SMSound objects...")}var g,h;for(g=cI.soundIDs.length-1;g>=0;g--){cI.sounds[cI.soundIDs[g]].destruct()}if(bf){try{if(bp){cD=bf.innerHTML}bd=bf.parentNode.removeChild(bf);cI._wD("Flash movie removed.")}catch(i){bP("badRemove",2)}}cD=bd=b0=null;cI.enabled=cu=ci=cH=bI=cB=a=bF=cI.swfLoaded=false;cI.soundIDs=[];cI.sounds={};bf=null;for(g in bS){if(bS.hasOwnProperty(g)){for(h=bS[g].length-1;h>=0;h--){bS[g][h].fired=false}}}cI._wD(cs+": Rebooting...");bj.setTimeout(cI.beginDelayedInit,20)};this.getMoviePercent=function(){return(bf&&typeof bf.PercentLoaded!=="undefined"?bf.PercentLoaded():null)};this.beginDelayedInit=function(){c=true;bC();setTimeout(function(){if(bI){return false}cj();a9();bI=true;return true},20);bZ()};this.destruct=function(){cI._wD(cs+".destruct()");cI.disable(true)};bt=function(k){var h=this,q,u,l,m,s,i,p=false,g=[],t=0,r,o,j=null,n;n={duration:null,time:null};this.id=k.id;this.sID=this.id;this.url=k.url;this.options=bU(k);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){if(cI.debugMode){var x=null,v=[],y,w,z=64;for(x in h.options){if(h.options[x]!==null){if(typeof h.options[x]==="function"){y=h.options[x].toString();y=y.replace(/\s\s+/g," ");w=y.indexOf("{");v.push(" "+x+": {"+y.substr(w+1,(Math.min(Math.max(y.indexOf("\n")-1,z),z))).replace(/\n/g,"")+"... }")}else{v.push(" "+x+": "+h.options[x])}}}cI._wD("SMSound() merged options: {\n"+v.join(", \n")+"\n}")}};this._debug();this.load=function(x){var w=null,y;if(typeof x!=="undefined"){h._iO=bU(x,h.options);h.instanceOptions=h._iO}else{x=h.options;h._iO=x;h.instanceOptions=h._iO;if(j&&j!==h.url){bP("manURL");h._iO.url=h.url;h.url=null}}if(!h._iO.url){h._iO.url=h.url}h._iO.url=ck(h._iO.url);cI._wD("SMSound.load(): "+h._iO.url,1);if(h._iO.url===h.url&&h.readyState!==0&&h.readyState!==2){bP("onURL",1);if(h.readyState===3&&h._iO.onload){h._iO.onload.apply(h,[(!!h.duration)])}return h}y=h._iO;j=h.url;h.loaded=false;h.readyState=1;h.playState=0;h.id3={};if(bM(y)){w=h._setup_html5(y);if(!w._called_load){cI._wD(cm+"load: "+h.id);h._html5_canplay=false;if(h._a.src!==y.url){cI._wD(bP("manURL")+": "+y.url);h._a.src=y.url;h.setPosition(0)}h._a.autobuffer="auto";h._a.preload="auto";w._called_load=true;if(y.autoPlay){h.play()}}else{cI._wD(cm+"ignoring request to load again: "+h.id)}}else{try{h.isHTML5=false;h._iO=bY(ca(y));y=h._iO;if(bq===8){bf._load(h.id,y.url,y.stream,y.autoPlay,(y.whileloading?1:0),y.loops||1,y.usePolicyFile)}else{bf._load(h.id,y.url,!!(y.stream),!!(y.autoPlay),y.loops||1,!!(y.autoLoad),y.usePolicyFile)}}catch(v){bP("smError",2);b1("onload",false);cr({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}return h};this.unload=function(){if(h.readyState!==0){cI._wD('SMSound.unload(): "'+h.id+'"');if(!h.isHTML5){if(bq===8){bf._unload(h.id,bV)}else{bf._unload(h.id)}}else{m();if(h._a){h._a.pause();cA(h._a,bV);h.url=bV}}q()}return h};this.destruct=function(v){cI._wD('SMSound.destruct(): "'+h.id+'"');if(!h.isHTML5){h._iO.onfailure=null;bf._destroySound(h.id)}else{m();if(h._a){h._a.pause();cA(h._a);if(!ch){l()}h._a._t=null;h._a=null}}if(!v){cI.destroySound(h.id,true)}};this.play=function(x,B){var v,C,A,z,w=true,y=null;v="SMSound.play(): ";B=(typeof B==="undefined"?true:B);if(!x){x={}}h._iO=bU(x,h._iO);h._iO=bU(h._iO,h.options);h._iO.url=ck(h._iO.url);h.instanceOptions=h._iO;if(h._iO.serverURL&&!h.connected){if(!h.getAutoPlay()){cI._wD(v+" Netstream not connected yet - setting autoPlay");h.setAutoPlay(true)}return h}if(bM(h._iO)){h._setup_html5(h._iO);s()}if(h.playState===1&&!h.paused){C=h._iO.multiShot;if(!C){cI._wD(v+'"'+h.id+'" already playing (one-shot)',1);y=h}else{cI._wD(v+'"'+h.id+'" already playing (multi-shot)',1)}}if(y!==null){return y}if(!h.loaded){if(h.readyState===0){cI._wD(v+'Attempting to load "'+h.id+'"',1);if(!h.isHTML5){h._iO.autoPlay=true;h.load(h._iO)}else{h.load(h._iO)}}else{if(h.readyState===2){cI._wD(v+'Could not load "'+h.id+'" - exiting',2);y=h}else{cI._wD(v+'"'+h.id+'" is loading - attempting to play..',1)}}}else{cI._wD(v+'"'+h.id+'"')}if(y!==null){return y}if(!h.isHTML5&&bq===9&&h.position>0&&h.position===h.duration){cI._wD(v+'"'+h.id+'": Sound at end, resetting to position:0');x.position=0}if(h.paused&&h.position&&h.position>0){cI._wD(v+'"'+h.id+'" is resuming from paused state',1);h.resume()}else{h._iO=bU(x,h._iO);if(h._iO.from!==null&&h._iO.to!==null&&h.instanceCount===0&&h.playState===0&&!h._iO.serverURL){z=function(){h._iO=bU(x,h._iO);h.play(h._iO)};if(h.isHTML5&&!h._html5_canplay){cI._wD(v+'Beginning load of "'+h.id+'" for from/to case');h.load({_oncanplay:z});y=false}else{if(!h.isHTML5&&!h.loaded&&(!h.readyState||h.readyState!==2)){cI._wD(v+'Preloading "'+h.id+'" for from/to case');h.load({onload:z});y=false}}if(y!==null){return y}h._iO=o()}cI._wD(v+'"'+h.id+'" is starting to play');if(!h.instanceCount||h._iO.multiShotEvents||(!h.isHTML5&&bq>8&&!h.getAutoPlay())){h.instanceCount++}if(h._iO.onposition&&h.playState===0){i(h)}h.playState=1;h.paused=false;h.position=(typeof h._iO.position!=="undefined"&&!isNaN(h._iO.position)?h._iO.position:0);if(!h.isHTML5){h._iO=bY(ca(h._iO))}if(h._iO.onplay&&B){h._iO.onplay.apply(h);p=true}h.setVolume(h._iO.volume,true);h.setPan(h._iO.pan,true);if(!h.isHTML5){w=bf._start(h.id,h._iO.loops||1,(bq===9?h._iO.position:h._iO.position/1000),h._iO.multiShot);if(bq===9&&!w){cI._wD(v+h.id+": No sound hardware, or 32-sound ceiling hit");if(h._iO.onplayerror){h._iO.onplayerror.apply(h)}}}else{s();A=h._setup_html5();h.setPosition(h._iO.position);A.play()}}return h};this.start=this.play;this.stop=function(v){var w=h._iO,x;if(h.playState===1){h._onbufferchange(0);h._resetOnPosition(0);h.paused=false;if(!h.isHTML5){h.playState=0}r();if(w.to){h.clearOnPosition(w.to)}if(!h.isHTML5){bf._stop(h.id,v);if(w.serverURL){h.unload()}}else{if(h._a){x=h.position;h.setPosition(0);h.position=x;h._a.pause();h.playState=0;h._onTimer();m()}}h.instanceCount=0;h._iO={};if(w.onstop){w.onstop.apply(h)}}return h};this.setAutoPlay=function(v){cI._wD("sound "+h.id+" turned autoplay "+(v?"on":"off"));h._iO.autoPlay=v;if(!h.isHTML5){bf._setAutoPlay(h.id,v);if(v){if(!h.instanceCount&&h.readyState===1){h.instanceCount++;cI._wD("sound "+h.id+" incremented instance count to "+h.instanceCount)}}}};this.getAutoPlay=function(){return h._iO.autoPlay};this.setPosition=function(x){if(typeof x==="undefined"){x=0}var y,A,z,v=(h.isHTML5?Math.max(x,0):Math.min(h.duration||h._iO.duration,Math.max(x,0)));y=h.position;h.position=v;z=h.position/1000;h._resetOnPosition(h.position);h._iO.position=v;if(!h.isHTML5){A=(bq===9?h.position:z);if(h.readyState&&h.readyState!==2){bf._setPosition(h.id,A,(h.paused||!h.playState),h._iO.multiShot)}}else{if(h._a){if(h._html5_canplay){if(h._a.currentTime!==z){cI._wD("setPosition("+z+"): setting position");try{h._a.currentTime=z;if(h.playState===0||h.paused){h._a.pause()}}catch(w){cI._wD("setPosition("+z+"): setting position failed: "+w.message,2)}}}else{cI._wD("setPosition("+z+"): delaying, sound not ready")}}}if(h.isHTML5){if(h.paused){h._onTimer(true)}}return h};this.pause=function(v){if(h.paused||(h.playState===0&&h.readyState!==1)){return h}cI._wD("SMSound.pause()");h.paused=true;if(!h.isHTML5){if(v||typeof v==="undefined"){bf._pause(h.id,h._iO.multiShot)}}else{h._setup_html5().pause();m()}if(h._iO.onpause){h._iO.onpause.apply(h)}return h};this.resume=function(){var v=h._iO;if(!h.paused){return h}cI._wD("SMSound.resume()");h.paused=false;h.playState=1;if(!h.isHTML5){if(v.isMovieStar&&!v.serverURL){h.setPosition(h.position)}bf._pause(h.id,v.multiShot)}else{h._setup_html5().play();s()}if(!p&&v.onplay){v.onplay.apply(h);p=true}else{if(v.onresume){v.onresume.apply(h)}}return h};this.togglePause=function(){cI._wD("SMSound.togglePause()");if(h.playState===0){h.play({position:(bq===9&&!h.isHTML5?h.position:h.position/1000)});return h}if(h.paused){h.resume()}else{h.pause()}return h};this.setPan=function(v,w){if(typeof v==="undefined"){v=0}if(typeof w==="undefined"){w=false}if(!h.isHTML5){bf._setPan(h.id,v)}h._iO.pan=v;if(!w){h.pan=v;h.options.pan=v}return h};this.setVolume=function(w,v){if(typeof w==="undefined"){w=100}if(typeof v==="undefined"){v=false}if(!h.isHTML5){bf._setVolume(h.id,(cI.muted&&!h.muted)||h.muted?0:w)}else{if(h._a){h._a.volume=Math.max(0,Math.min(1,w/100))}}h._iO.volume=w;if(!v){h.volume=w;h.options.volume=w}return h};this.mute=function(){h.muted=true;if(!h.isHTML5){bf._setVolume(h.id,0)}else{if(h._a){h._a.muted=true}}return h};this.unmute=function(){h.muted=false;var v=(typeof h._iO.volume!=="undefined");if(!h.isHTML5){bf._setVolume(h.id,v?h._iO.volume:h.options.volume)}else{if(h._a){h._a.muted=false}}return h};this.toggleMute=function(){return(h.muted?h.unmute():h.mute())};this.onPosition=function(v,w,x){g.push({position:parseInt(v,10),method:w,scope:(typeof x!=="undefined"?x:h),fired:false});return h};this.onposition=this.onPosition;this.clearOnPosition=function(w,x){var v;w=parseInt(w,10);if(isNaN(w)){return false}for(v=0;v<g.length;v++){if(w===g[v].position){if(!x||(x===g[v].method)){if(g[v].fired){t--}g.splice(v,1)}}}};this._processOnPosition=function(){var w,v,x=g.length;if(!x||!h.playState||t>=x){return false}for(w=x-1;w>=0;w--){v=g[w];if(!v.fired&&h.position>=v.position){v.fired=true;t++;v.method.apply(v.scope,[v.position])}}return true};this._resetOnPosition=function(y){var w,v,x=g.length;if(!x){return false}for(w=x-1;w>=0;w--){v=g[w];if(v.fired&&y<=v.position){v.fired=false;t--}}return true};o=function(){var y=h._iO,w=y.from,x=y.to,v,z;z=function(){cI._wD(h.id+': "to" time of '+x+" reached.");h.clearOnPosition(x,z);h.stop()};v=function(){cI._wD(h.id+': playing "from" '+w);if(x!==null&&!isNaN(x)){h.onPosition(x,z)}};if(w!==null&&!isNaN(w)){y.position=w;y.multiShot=false;v()}return y};i=function(){var w,v=h._iO.onposition;if(v){for(w in v){if(v.hasOwnProperty(w)){h.onPosition(parseInt(w,10),v[w])}}}};r=function(){var w,v=h._iO.onposition;if(v){for(w in v){if(v.hasOwnProperty(w)){h.clearOnPosition(parseInt(w,10))}}}};s=function(){if(h.isHTML5){b(h)}};m=function(){if(h.isHTML5){bu(h)}};q=function(v){if(!v){g=[];t=0}p=false;h._hasTimer=null;h._a=null;h._html5_canplay=false;h.bytesLoaded=null;h.bytesTotal=null;h.duration=(h._iO&&h._iO.duration?h._iO.duration:null);h.durationEstimate=null;h.buffered=[];h.eqData=[];h.eqData.left=[];h.eqData.right=[];h.failures=0;h.isBuffering=false;h.instanceOptions={};h.instanceCount=0;h.loaded=false;h.metadata={};h.readyState=0;h.muted=false;h.paused=false;h.peakData={left:0,right:0};h.waveformData={left:[],right:[]};h.playState=0;h.position=null;h.id3={}};q();this._onTimer=function(x){var v,y=false,w,z={};if(h._hasTimer||x){if(h._a&&(x||((h.playState>0||h.readyState===1)&&!h.paused))){v=h._get_html5_duration();if(v!==n.duration){n.duration=v;h.duration=v;y=true}h.durationEstimate=h.duration;w=(h._a.currentTime*1000||0);if(w!==n.time){n.time=w;y=true}if(y||x){h._whileplaying(w,z,z,z,z)}}return y}};this._get_html5_duration=function(){var w=h._iO,v=(h._a?h._a.duration*1000:(w?w.duration:undefined)),x=(v&&!isNaN(v)&&v!==Infinity?v:(w?w.duration:null));return x};this._apply_loop=function(w,v){if(!w.loop&&v>1){cI._wD("Note: Native HTML5 looping is infinite.")}w.loop=(v>1?"loop":"")};this._setup_html5=function(y){var z=bU(h._iO,y),v=decodeURI,x=ch?cI._global_a:h._a,w=v(z.url),A=(x&&x._t?x._t.instanceOptions:null),B;if(x){if(x._t){if(!ch&&w===v(j)){B=x}else{if(ch&&A.url===z.url&&(!j||(j===A.url))){B=x}}if(B){h._apply_loop(x,z.loops);return B}}cI._wD("setting URL on existing object: "+w+(j?", old URL: "+j:""));if(ch&&x._t&&x._t.playState&&z.url!==A.url){x._t.stop()}q((A&&A.url?z.url===A.url:(j?j===z.url:false)));x.src=z.url;h.url=z.url;j=z.url;x._called_load=false}else{bP("h5a");if(z.autoLoad||z.autoPlay){h._a=new Audio(z.url)}else{h._a=(bD?new Audio(null):new Audio())}x=h._a;x._called_load=false;if(ch){cI._global_a=x}}h.isHTML5=true;h._a=x;x._t=h;u();h._apply_loop(x,z.loops);if(z.autoLoad||z.autoPlay){h.load()}else{x.autobuffer=false;x.preload="auto"}return x};u=function(){if(h._a._added_events){return false}var w;function v(y,z,x){return h._a?h._a.addEventListener(y,z,x||false):null}h._a._added_events=true;for(w in a8){if(a8.hasOwnProperty(w)){v(w,a8[w])}}return true};l=function(){var v;function w(y,z,x){return(h._a?h._a.removeEventListener(y,z,x||false):null)}cI._wD(cm+"removing event listeners: "+h.id);h._a._added_events=false;for(v in a8){if(a8.hasOwnProperty(v)){w(v,a8[v])}}};this._onload=function(v){var x,w=(!!(v)||(!h.isHTML5&&bq===8&&h.duration));x="SMSound._onload(): ";cI._wD(x+'"'+h.id+'"'+(w?" loaded.":" failed to load? - "+h.url),(w?1:2));if(!w&&!h.isHTML5){if(cI.sandbox.noRemote===true){cI._wD(x+cc("noNet"),1)}if(cI.sandbox.noLocal===true){cI._wD(x+cc("noLocal"),1)}}h.loaded=w;h.readyState=w?3:2;h._onbufferchange(0);if(h._iO.onload){h._iO.onload.apply(h,[w])}return true};this._onbufferchange=function(v){if(h.playState===0){return false}if((v&&h.isBuffering)||(!v&&!h.isBuffering)){return false}h.isBuffering=(v===1);if(h._iO.onbufferchange){cI._wD("SMSound._onbufferchange(): "+v);h._iO.onbufferchange.apply(h)}return true};this._onsuspend=function(){if(h._iO.onsuspend){cI._wD("SMSound._onsuspend()");h._iO.onsuspend.apply(h)}return true};this._onfailure=function(w,v,x){h.failures++;cI._wD('SMSound._onfailure(): "'+h.id+'" count '+h.failures);if(h._iO.onfailure&&h.failures===1){h._iO.onfailure(h,w,v,x)}else{cI._wD("SMSound._onfailure(): ignoring")}};this._onfinish=function(){var v=h._iO.onfinish;h._onbufferchange(0);h._resetOnPosition(0);if(h.instanceCount){h.instanceCount--;if(!h.instanceCount){r();h.playState=0;h.paused=false;h.instanceCount=0;h.instanceOptions={};h._iO={};m();if(h.isHTML5){h.position=0}}if(!h.instanceCount||h._iO.multiShotEvents){if(v){cI._wD('SMSound._onfinish(): "'+h.id+'"');v.apply(h)}}}};this._whileloading=function(z,x,v,w){var y=h._iO;h.bytesLoaded=z;h.bytesTotal=x;h.duration=Math.floor(v);h.bufferLength=w;if(!y.isMovieStar){if(y.duration){h.durationEstimate=(h.duration>y.duration)?h.duration:y.duration}else{h.durationEstimate=parseInt((h.bytesTotal/h.bytesLoaded)*h.duration,10)}if(typeof h.durationEstimate==="undefined"){h.durationEstimate=h.duration}}else{h.durationEstimate=h.duration}if(!h.isHTML5){h.buffered=[{start:0,end:h.duration}]}if((h.readyState!==3||h.isHTML5)&&y.whileloading){y.whileloading.apply(h)}};this._whileplaying=function(z,x,v,A,w){var y=h._iO,B;if(isNaN(z)||z===null){return false}h.position=Math.max(0,z);h._processOnPosition();if(!h.isHTML5&&bq>8){if(y.usePeakData&&typeof x!=="undefined"&&x){h.peakData={left:x.leftPeak,right:x.rightPeak}}if(y.useWaveformData&&typeof v!=="undefined"&&v){h.waveformData={left:v.split(","),right:A.split(",")}}if(y.useEQData){if(typeof w!=="undefined"&&w&&w.leftEQ){B=w.leftEQ.split(",");h.eqData=B;h.eqData.left=B;if(typeof w.rightEQ!=="undefined"&&w.rightEQ){h.eqData.right=w.rightEQ.split(",")}}}}if(h.playState===1){if(!h.isHTML5&&bq===8&&!h.position&&h.isBuffering){h._onbufferchange(0)}if(y.whileplaying){y.whileplaying.apply(h)}}return true};this._oncaptiondata=function(v){cI._wD('SMSound._oncaptiondata(): "'+this.id+'" caption data received.');h.captiondata=v;if(h._iO.oncaptiondata){h._iO.oncaptiondata.apply(h)}};this._onmetadata=function(w,z){cI._wD('SMSound._onmetadata(): "'+this.id+'" metadata received.');var v={},x,y;for(x=0,y=w.length;x<y;x++){v[w[x]]=z[x]}h.metadata=v;if(h._iO.onmetadata){h._iO.onmetadata.apply(h)}};this._onid3=function(w,z){cI._wD('SMSound._onid3(): "'+this.id+'" ID3 data received.');var v=[],x,y;for(x=0,y=w.length;x<y;x++){v[w[x]]=z[x]}h.id3=bU(h.id3,v);if(h._iO.onid3){h._iO.onid3.apply(h)}};this._onconnect=function(v){v=(v===1);cI._wD('SMSound._onconnect(): "'+h.id+'"'+(v?" connected.":" failed to connect? - "+h.url),(v?1:2));h.connected=v;if(v){h.failures=0;if(b4(h.id)){if(h.getAutoPlay()){h.play(undefined,h.getAutoPlay())}else{if(h._iO.autoLoad){h.load()}}}if(h._iO.onconnect){h._iO.onconnect.apply(h,[v])}}};this._ondataerror=function(v){if(h.playState>0){cI._wD("SMSound._ondataerror(): "+v);if(h._iO.ondataerror){h._iO.ondataerror.apply(h)}}}};cG=function(){return(co.body||co._docElement||co.getElementsByTagName("div")[0])};cd=function(g){return co.getElementById(g)};bU=function(g,h){var j=(g||{}),k,i;k=(typeof h==="undefined"?cI.defaultOptions:h);for(i in k){if(k.hasOwnProperty(i)&&typeof j[i]==="undefined"){if(typeof k[i]!=="object"||k[i]===null){j[i]=k[i]}else{j[i]=bU(j[i],k[i])}}}return j};bi={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};cL=function(i,j){var l,g=true,h=(typeof j!=="undefined"),m=cI.setupOptions,k=bi;if(typeof i==="undefined"){g=[];for(l in m){if(m.hasOwnProperty(l)){g.push(l)}}for(l in k){if(k.hasOwnProperty(l)){if(typeof cI[l]==="object"){g.push(l+": {...}")}else{if(cI[l] instanceof Function){g.push(l+": function() {...}")}else{g.push(l)}}}}cI._wD(cc("setup",g.join(", ")));return false}for(l in i){if(i.hasOwnProperty(l)){if(typeof i[l]!=="object"||i[l]===null||i[l] instanceof Array){if(h&&typeof k[j]!=="undefined"){cI[j][l]=i[l]}else{if(typeof m[l]!=="undefined"){cI.setupOptions[l]=i[l];cI[l]=i[l]}else{if(typeof k[l]==="undefined"){br(cc((typeof cI[l]==="undefined"?"setupUndef":"setupError"),l),2);g=false}else{if(cI[l] instanceof Function){cI[l].apply(cI,(i[l] instanceof Array?i[l]:[i[l]]))}else{cI[l]=i[l]}}}}}else{if(typeof k[l]==="undefined"){br(cc((typeof cI[l]==="undefined"?"setupUndef":"setupError"),l),2);g=false}else{return cL(i[l],l)}}}}return g};ba=(function(){var l=(bj.attachEvent),g={add:(l?"attachEvent":"addEventListener"),remove:(l?"detachEvent":"removeEventListener")};function j(m){var n=bl.call(m),o=n.length;if(l){n[1]="on"+n[1];if(o>3){n.pop()}}else{if(o===3){n.push(false)}}return n}function k(p,m){var o=p.shift(),n=[g[m]];if(l){o[n](p[0],p[1])}else{o[n].apply(o,p)}}function i(){k(j(arguments),"add")}function h(){k(j(arguments),"remove")}return{add:i,remove:h}}());function bk(g){return(cI.preferFlash&&bo&&!cI.ignoreFlash&&(typeof cI.flash[g]!=="undefined"&&cI.flash[g]))}function by(g){return function(i){var j=this._t,h;if(!j||!j._a){if(j&&j.id){cI._wD(cm+"ignoring "+i.type+": "+j.id)}else{cI._wD(cm+"ignoring "+i.type)}h=null}else{h=g.call(this,i)}return h}}a8={abort:by(function(){cI._wD(cm+"abort: "+this._t.id)}),canplay:by(function(){var i=this._t,g;if(i._html5_canplay){return true}i._html5_canplay=true;cI._wD(cm+"canplay: "+i.id+", "+i.url);i._onbufferchange(0);g=(typeof i._iO.position!=="undefined"&&!isNaN(i._iO.position)?i._iO.position/1000:null);if(i.position&&this.currentTime!==g){cI._wD(cm+"canplay: setting position to "+g);try{this.currentTime=g}catch(h){cI._wD(cm+"setting position of "+g+" failed: "+h.message,2)}}if(i._iO._oncanplay){i._iO._oncanplay()}}),canplaythrough:by(function(){var g=this._t;if(!g.loaded){g._onbufferchange(0);g._whileloading(g.bytesLoaded,g.bytesTotal,g._get_html5_duration());g._onload(true)}}),ended:by(function(){var g=this._t;cI._wD(cm+"ended: "+g.id);g._onfinish()}),error:by(function(){cI._wD(cm+"error: "+this.error.code);this._t._onload(false)}),loadeddata:by(function(){var g=this._t;cI._wD(cm+"loadeddata: "+this._t.id);if(!g._loaded&&!bJ){g.duration=g._get_html5_duration()}}),loadedmetadata:by(function(){cI._wD(cm+"loadedmetadata: "+this._t.id)}),loadstart:by(function(){cI._wD(cm+"loadstart: "+this._t.id);this._t._onbufferchange(1)}),play:by(function(){cI._wD(cm+"play: "+this._t.id+", "+this._t.url);this._t._onbufferchange(0)}),playing:by(function(){cI._wD(cm+"playing: "+this._t.id);this._t._onbufferchange(0)}),progress:by(function(k){var g=this._t,l,n,j,o=0,h=(k.type==="progress"),p=k.target.buffered,m=(k.loaded||0),i=(k.total||1);g.buffered=[];if(p&&p.length){for(l=0,n=p.length;l<n;l++){g.buffered.push({start:p.start(l),end:p.end(l)})}o=(p.end(0)-p.start(0));m=o/k.target.duration;if(h&&p.length>1){j=[];n=p.length;for(l=0;l<n;l++){j.push(k.target.buffered.start(l)+"-"+k.target.buffered.end(l))}cI._wD(cm+"progress: timeRanges: "+j.join(", "))}if(h&&!isNaN(m)){cI._wD(cm+"progress: "+g.id+": "+Math.floor(m*100)+"% loaded")}}if(!isNaN(m)){g._onbufferchange(0);g._whileloading(m,i,g._get_html5_duration());if(m&&i&&m===i){a8.canplaythrough.call(this,k)}}}),ratechange:by(function(){cI._wD(cm+"ratechange: "+this._t.id)}),suspend:by(function(g){var h=this._t;cI._wD(cm+"suspend: "+h.id);a8.progress.call(this,g);h._onsuspend()}),stalled:by(function(){cI._wD(cm+"stalled: "+this._t.id)}),timeupdate:by(function(){this._t._onTimer()}),waiting:by(function(){var g=this._t;cI._wD(cm+"waiting: "+g.id);g._onbufferchange(1)})};bM=function(g){var h;if(g.serverURL||(g.type&&bk(g.type))){h=false}else{h=((g.type?cz({type:g.type}):cz({url:g.url})||cI.html5Only))}return h};cA=function(h,g){if(h){h.src=g}};cz=function(i){if(!cI.useHTML5Audio||!cI.hasHTML5){return false}var m=(i.url||null),k=(i.type||null),g=cI.audioFormats,h,j,n,l;if(k&&typeof cI.html5[k]!=="undefined"){return(cI.html5[k]&&!bk(k))}if(!bc){bc=[];for(l in g){if(g.hasOwnProperty(l)){bc.push(l);if(g[l].related){bc=bc.concat(g[l].related)}}}bc=new RegExp("\\.("+bc.join("|")+")(\\?.*)?$","i")}n=(m?m.toLowerCase().match(bc):null);if(!n||!n.length){if(!k){h=false}else{j=k.indexOf(";");n=(j!==-1?k.substr(0,j):k).substr(6)}}else{n=n[1]}if(n&&typeof cI.html5[n]!=="undefined"){h=(cI.html5[n]&&!bk(n))}else{k="audio/"+n;h=cI.html5.canPlayType({type:k});cI.html5[n]=h;h=(h&&cI.html5[k]&&!bk(k))}return h};cK=function(){if(!cI.useHTML5Audio||typeof Audio==="undefined"){return false}var h=(typeof Audio!=="undefined"?(bD?new Audio(null):new Audio()):null),j,i,k={},m,l;function g(q){var o,n,p,r=false,s=false;if(!h||typeof h.canPlayType!=="function"){return r}if(q instanceof Array){for(n=0,p=q.length;n<p&&!s;n++){if(cI.html5[q[n]]||h.canPlayType(q[n]).match(cI.html5Test)){s=true;cI.html5[q[n]]=true;cI.flash[q[n]]=!!(q[n].match(bx))}}r=s}else{o=(h&&typeof h.canPlayType==="function"?h.canPlayType(q):false);r=!!(o&&(o.match(cI.html5Test)))}return r}m=cI.audioFormats;for(j in m){if(m.hasOwnProperty(j)){i="audio/"+j;k[j]=g(m[j].type);k[i]=k[j];if(j.match(bx)){cI.flash[j]=true;cI.flash[i]=true}else{cI.flash[j]=false;cI.flash[i]=false}if(m[j]&&m[j].related){for(l=m[j].related.length-1;l>=0;l--){k["audio/"+m[j].related[l]]=k[j];cI.html5[m[j].related[l]]=k[j];cI.flash[m[j].related[l]]=k[j]}}}}k.canPlayType=(h?g:null);cI.html5=bU(cI.html5,k);return true};bz={notReady:"Not loaded yet - wait for soundManager.onready()",notOK:"Audio support is not available.",domError:cF+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:cF+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:cs+": Verify that %s is a valid path.",tryDebug:"Try "+cs+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:cs+": Non-HTTP page ("+co.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:cs+": Special case: Waiting for SWF to load with window focus...",waitImpatient:cs+": Getting impatient, still waiting for Flash%s...",waitForever:cs+": Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:cs+": Retrying, waiting for 100% SWF load...",needFunction:cs+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+cs+"._debug(): Current sound objects ---",waitEI:cF+"initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:cs+": Waiting for window.onload()",docLoaded:cs+": Document already loaded",onload:cF+"initComplete(): calling soundManager.onload()",onloadOK:cs+".onload() complete",init:cF+"init()",didInit:cF+"init(): Already called?",flashJS:cs+": Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:cs+".disable(): Shutting down",queue:cs+": Queueing %s handler",smFail:cs+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+bX.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:cF+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:cs+".load(): current URL already assigned.",badFV:cs+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access",setup:cs+".setup(): allowed parameters: %s",setupError:cs+'.setup(): "%s" cannot be assigned with this method.',setupUndef:cs+'.setup(): Could not find option "%s"',setupLate:cs+".setup(): url + flashVersion changes will not take effect until reboot().",h5a:"creating HTML5 Audio() object"};cc=function(){var g=bl.call(arguments),i=g.shift(),j=(bz&&bz[i]?bz[i]:""),k,h;if(j&&g&&g.length){for(k=0,h=g.length;k<h;k++){j=j.replace("%s",g[k])}}return j};ca=function(g){if(bq===8&&g.loops>1&&g.stream){bP("as2loop");g.stream=false}return g};bY=function(g,h){if(g&&!g.usePolicyFile&&(g.onid3||g.usePeakData||g.useWaveformData||g.useEQData)){cI._wD((h||"")+cc("policy"));g.usePolicyFile=true}return g};br=function(g){if(typeof console!=="undefined"&&typeof console.warn!=="undefined"){console.warn(g)}else{cI._wD(g)}};b5=function(){return false};cg=function(g){var h;for(h in g){if(g.hasOwnProperty(h)&&typeof g[h]==="function"){g[h]=b5}}h=null};bK=function(g){if(typeof g==="undefined"){g=false}if(bF||g){bP("smFail",2);cI.disable(g)}};bn=function(h){var g=null,i;if(h){if(h.match(/\.swf(\?.*)?$/i)){g=h.substr(h.toLowerCase().lastIndexOf(".swf?")+4);if(g){return h}}else{if(h.lastIndexOf("/")!==h.length-1){h+="/"}}}i=(h&&h.lastIndexOf("/")!==-1?h.substr(0,h.lastIndexOf("/")+1):"./")+cI.movieURL;if(cI.noSWFCache){i+=("?ts="+new Date().getTime())}return i};bA=function(){bq=parseInt(cI.flashVersion,10);if(bq!==8&&bq!==9){cI._wD(cc("badFV",bq,bw));cI.flashVersion=bq=bw}var g=(cI.debugMode||cI.debugFlash?"_debug.swf":".swf");if(cI.useHTML5Audio&&!cI.html5Only&&cI.audioFormats.mp4.required&&bq<9){cI._wD(cc("needfl9"));cI.flashVersion=bq=9}cI.version=cI.versionNumber+(cI.html5Only?" (HTML5-only mode)":(bq===9?" (AS3/Flash 9)":" (AS2/Flash 8)"));if(bq>8){cI.defaultOptions=bU(cI.defaultOptions,cI.flash9Options);cI.features.buffering=true;cI.defaultOptions=bU(cI.defaultOptions,cI.movieStarOptions);cI.filePatterns.flash9=new RegExp("\\.(mp3|"+cw.join("|")+")(\\?.*)?$","i");cI.features.movieStar=true}else{cI.features.movieStar=false}cI.filePattern=cI.filePatterns[(bq!==8?"flash9":"flash8")];cI.movieURL=(bq===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",g);cI.features.peakData=cI.features.waveformData=cI.features.eqData=(bq>8)};bQ=function(h,g){if(!bf){return false}bf._setPolling(h,g)};bG=function(){if(cI.debugURLParam.test(bh)){cI.debugMode=true}if(cd(cI.debugID)){return false}var i,j,h,l,g;if(cI.debugMode&&!cd(cI.debugID)&&(!ct||!cI.useConsole||!cI.consoleOnly)){i=co.createElement("div");i.id=cI.debugID+"-toggle";l={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};i.appendChild(co.createTextNode("-"));i.onclick=bW;i.title="Toggle SM2 debug console";if(b7.match(/msie 6/i)){i.style.position="absolute";i.style.cursor="hand"}for(g in l){if(l.hasOwnProperty(g)){i.style[g]=l[g]}}j=co.createElement("div");j.id=cI.debugID;j.style.display=(cI.debugMode?"block":"none");if(cI.debugMode&&!cd(i.id)){try{h=cG();h.appendChild(i)}catch(k){throw new Error(cc("domError")+" \n"+k.toString())}h.appendChild(j)}}h=null};b4=this.getSoundById;bP=function(g,h){return(!g?"":cI._wD(cc(g),h))};if(bh.indexOf("sm2-debug=alert")+1&&cI.debugMode){cI._wD=function(g){f.alert(g)}}bW=function(){var g=cd(cI.debugID),h=cd(cI.debugID+"-toggle");if(!g){return false}if(bg){h.innerHTML="+";g.style.display="none"}else{h.innerHTML="-";g.style.display="block"}bg=!bg};b1=function(i,h,g){if(typeof sm2Debugger!=="undefined"){try{sm2Debugger.handleEvent(i,h,g)}catch(j){}}return true};bB=function(){var g=[];if(cI.debugMode){g.push(bX.sm2Debug)}if(cI.debugFlash){g.push(bX.flashDebug)}if(cI.useHighPerformance){g.push(bX.highPerf)}return g.join(" ")};bm=function(){var g=cc("fbHandler"),i=cI.getMoviePercent(),j=bX,h={type:"FLASHBLOCK"};if(cI.html5Only){return false}if(!cI.ok()){if(b0){cI.oMC.className=bB()+" "+j.swfDefault+" "+(i===null?j.swfTimedout:j.swfError);cI._wD(g+": "+cc("fbTimeout")+(i?" ("+cc("fbLoaded")+")":""))}cI.didFlashBlock=true;cJ({type:"ontimeout",ignoreInit:true,error:h});cr(h)}else{if(cI.didFlashBlock){cI._wD(g+": Unblocked")}if(cI.oMC){cI.oMC.className=[bB(),j.swfDefault,j.swfLoaded+(cI.didFlashBlock?" "+j.swfUnblocked:"")].join(" ")}}};cN=function(i,g,h){if(typeof bS[i]==="undefined"){bS[i]=[]}bS[i].push({method:g,scope:(h||null),fired:false})};cJ=function(j){if(!j){j={type:(cI.ok()?"onready":"ontimeout")}}if(!ci&&j&&!j.ignoreInit){return false}if(j.type==="ontimeout"&&(cI.ok()||(bF&&!j.ignoreInit))){return false}var n={success:(j&&j.ignoreInit?cI.ok():!bF)},g=(j&&j.type?bS[j.type]||[]:[]),i=[],h,k,l=[n],m=(b0&&cI.useFlashBlock&&!cI.ok());if(j.error){l[0].error=j.error}for(h=0,k=g.length;h<k;h++){if(g[h].fired!==true){i.push(g[h])}}if(i.length){cI._wD(cs+": Firing "+i.length+" "+j.type+"() item"+(i.length===1?"":"s"));for(h=0,k=i.length;h<k;h++){if(i[h].scope){i[h].method.apply(i[h].scope,l)}else{i[h].method.apply(this,l)}if(!m){i[h].fired=true}}}return true};cE=function(){bj.setTimeout(function(){if(cI.useFlashBlock){bm()}cJ();if(typeof cI.onload==="function"){bP("onload",1);cI.onload.apply(bj);bP("onloadOK",1)}if(cI.waitForWindowLoad){ba.add(bj,"load",cE)}},1)};cM=function(){if(typeof bo!=="undefined"){return bo}var i=false,h=navigator,m=h.plugins,j,n,g,k=bj.ActiveXObject;if(m&&m.length){n="application/x-shockwave-flash";g=h.mimeTypes;if(g&&g[n]&&g[n].enabledPlugin&&g[n].enabledPlugin.description){i=true}}else{if(typeof k!=="undefined"){try{j=new k("ShockwaveFlash.ShockwaveFlash")}catch(l){}i=(!!j)}}bo=i;return i};b2=function(){var i,j,g=true,h=cI.audioFormats,k=(bH&&!!(b7.match(/os (1|2|3_0|3_1)/i)));if(k){cI.hasHTML5=false;cI.html5Only=true;if(cI.oMC){cI.oMC.style.display="none"}g=false}else{if(cI.useHTML5Audio){if(!cI.html5||!cI.html5.canPlayType){cI._wD("SoundManager: No HTML5 Audio() support detected.");cI.hasHTML5=false}else{cI.hasHTML5=true}if(bL){cI._wD(cF+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!bo?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(cI.useHTML5Audio&&cI.hasHTML5){for(j in h){if(h.hasOwnProperty(j)){if((h[j].required&&!cI.html5.canPlayType(h[j].type))||(cI.preferFlash&&(cI.flash[j]||cI.flash[h[j].type]))){i=true}}}}if(cI.ignoreFlash){i=false}cI.html5Only=(cI.hasHTML5&&cI.useHTML5Audio&&!i);return(!cI.html5Only)};ck=function(k){var i,g,j=0,h;if(k instanceof Array){for(i=0,g=k.length;i<g;i++){if(k[i] instanceof Object){if(cI.canPlayMIME(k[i].type)){j=i;break}}else{if(cI.canPlayURL(k[i])){j=i;break}}}if(k[j].url){k[j]=k[j].url}h=k[j]}else{h=k}return h};b=function(g){if(!g._hasTimer){g._hasTimer=true;if(!cf&&cI.html5PollingInterval){if(bb===null&&b8===0){bb=bj.setInterval(bO,cI.html5PollingInterval)}b8++}}};bu=function(g){if(g._hasTimer){g._hasTimer=false;if(!cf&&cI.html5PollingInterval){b8--}}};bO=function(){var g;if(bb!==null&&!b8){bj.clearInterval(bb);bb=null;return false}for(g=cI.soundIDs.length-1;g>=0;g--){if(cI.sounds[cI.soundIDs[g]].isHTML5&&cI.sounds[cI.soundIDs[g]]._hasTimer){cI.sounds[cI.soundIDs[g]]._onTimer()}}};cr=function(g){g=(typeof g!=="undefined"?g:{});if(typeof cI.onerror==="function"){cI.onerror.apply(bj,[{type:(typeof g.type!=="undefined"?g.type:null)}])}if(typeof g.fatal!=="undefined"&&g.fatal){cI.disable()}};cb=function(){if(!bL||!cM()){return false}var h=cI.audioFormats,g,i;for(i in h){if(h.hasOwnProperty(i)){if(i==="mp3"||i==="mp4"){cI._wD(cs+": Using flash fallback for "+i+" format");cI.html5[i]=false;if(h[i]&&h[i].related){for(g=h[i].related.length-1;g>=0;g--){cI.html5[h[i].related[g]]=false}}}}}};this._setSandboxType=function(h){var g=cI.sandbox;g.type=h;g.description=g.types[(typeof g.types[h]!=="undefined"?h:"unknown")];cI._wD("Flash security sandbox type: "+g.type);if(g.type==="localWithFile"){g.noRemote=true;g.noLocal=false;bP("secNote",2)}else{if(g.type==="localWithNetwork"){g.noRemote=false;g.noLocal=true}else{if(g.type==="localTrusted"){g.noRemote=false;g.noLocal=false}}}};this._externalInterfaceOK=function(h,k){if(cI.swfLoaded){return false}var i,j=new Date().getTime();cI._wD(cF+"externalInterfaceOK()"+(h?" (~"+(j-h)+" ms)":""));b1("swf",true);b1("flashtojs",true);cI.swfLoaded=true;b6=false;if(bL){cb()}if(!k||k.replace(/\+dev/i,"")!==cI.versionNumber.replace(/\+dev/i,"")){i=cs+': Fatal: JavaScript file build "'+cI.versionNumber+'" does not match Flash SWF build "'+k+'" at '+cI.url+". Ensure both are up-to-date.";setTimeout(function g(){throw new Error(i)},0);return false}setTimeout(cy,bp?100:1)};cj=function(h,r){if(cB&&a){return false}function j(){cI._wD("-- SoundManager 2 "+cI.version+(!cI.html5Only&&cI.useHTML5Audio?(cI.hasHTML5?" + HTML5 audio":", no HTML5 audio support"):"")+(!cI.html5Only?(cI.useHighPerformance?", high performance mode, ":", ")+((cI.flashPollingInterval?"custom ("+cI.flashPollingInterval+"ms)":"normal")+" polling")+(cI.wmode?", wmode: "+cI.wmode:"")+(cI.debugFlash?", flash debug mode":"")+(cI.useFlashBlock?", flashBlock mode":""):"")+" --",1)}if(cI.html5Only){bA();j();cI.oMC=cd(cI.movieID);cy();cB=true;a=true;return false}var i=(r||cI.url),n=(cI.altURL||i),w="JS/Flash audio component (SoundManager 2)",z,q,k=cG(),y,m,o,l=bB(),p,t,x,v=null,s=co.getElementsByTagName("html")[0];v=(s&&s.dir&&s.dir.match(/rtl/i));h=(typeof h==="undefined"?cI.id:h);function u(B,A){return'<param name="'+B+'" value="'+A+'" />'}bA();cI.url=bn(cC?i:n);r=cI.url;cI.wmode=(!cI.wmode&&cI.useHighPerformance?"transparent":cI.wmode);if(cI.wmode!==null&&(b7.match(/msie 8/i)||(!bp&&!cI.useHighPerformance))&&navigator.platform.match(/win32|win64/i)){bP("spcWmode");cI.wmode=null}z={name:h,id:h,src:r,quality:"high",allowScriptAccess:cI.allowScriptAccess,bgcolor:cI.bgColor,pluginspage:cx+"www.macromedia.com/go/getflashplayer",title:w,type:"application/x-shockwave-flash",wmode:cI.wmode,hasPriority:"true"};if(cI.debugFlash){z.FlashVars="debug=1"}if(!cI.wmode){delete z.wmode}if(bp){q=co.createElement("div");m=['<object id="'+h+'" data="'+r+'" type="'+z.type+'" title="'+z.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+cx+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',u("movie",r),u("AllowScriptAccess",cI.allowScriptAccess),u("quality",z.quality),(cI.wmode?u("wmode",cI.wmode):""),u("bgcolor",cI.bgColor),u("hasPriority","true"),(cI.debugFlash?u("FlashVars",z.FlashVars):""),"</object>"].join("")}else{q=co.createElement("embed");for(y in z){if(z.hasOwnProperty(y)){q.setAttribute(y,z[y])}}}bG();l=bB();k=cG();if(k){cI.oMC=(cd(cI.movieID)||co.createElement("div"));if(!cI.oMC.id){cI.oMC.id=cI.movieID;cI.oMC.className=bX.swfDefault+" "+l;p=null;o=null;if(!cI.useFlashBlock){if(cI.useHighPerformance){p={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{p={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(v){p.left=Math.abs(parseInt(p.left,10))+"px"}}}if(be){cI.oMC.style.zIndex=10000}if(!cI.debugFlash){for(t in p){if(p.hasOwnProperty(t)){cI.oMC.style[t]=p[t]}}}try{if(!bp){cI.oMC.appendChild(q)}k.appendChild(cI.oMC);if(bp){o=cI.oMC.appendChild(co.createElement("div"));o.className=bX.swfBox;o.innerHTML=m}a=true}catch(g){throw new Error(cc("domError")+" \n"+g.toString())}}else{x=cI.oMC.className;cI.oMC.className=(x?x+" ":bX.swfDefault)+(l?" "+l:"");cI.oMC.appendChild(q);if(bp){o=cI.oMC.appendChild(co.createElement("div"));o.className=bX.swfBox;o.innerHTML=m}a=true}}cB=true;j();cI._wD(cF+"createMovie(): Trying to load "+r+(!cC&&cI.altURL?" (alternate URL)":""),1);return true};a9=function(){if(cI.html5Only){cj();return false}if(bf){return false}bf=cI.getMovie(cI.id);if(!bf){if(!bd){cj(cI.id,cI.url)}else{if(!bp){cI.oMC.appendChild(bd)}else{cI.oMC.innerHTML=cD}bd=null;cB=true}bf=cI.getMovie(cI.id)}if(bf){bP("waitEI")}if(typeof cI.oninitmovie==="function"){setTimeout(cI.oninitmovie,1)}return true};bZ=function(){setTimeout(a0,1000)};a0=function(){var g,h=false;if(cH){return false}cH=true;ba.remove(bj,"load",bZ);if(b6&&!cn){bP("waitFocus");return false}if(!ci){g=cI.getMoviePercent();cI._wD(cc("waitImpatient",(g>0?" (SWF "+g+"% loaded)":"")));if(g>0&&g<100){h=true}}setTimeout(function(){g=cI.getMoviePercent();if(h){cH=false;cI._wD(cc("waitSWF"));bj.setTimeout(bZ,1);return false}if(!ci){cI._wD(cs+": No Flash response within expected time.\nLikely causes: "+(g===0?"Loading "+cI.movieURL+" may have failed (and/or Flash "+bq+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(cI.debugFlash?" "+cc("checkSWF"):""),2);if(!cC&&g){bP("localFail",2);if(!cI.debugFlash){bP("tryDebug",2)}}if(g===0){cI._wD(cc("swf404",cI.url))}b1("flashtojs",false,": Timed out"+cC?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!ci&&bE){if(g===null){if(cI.useFlashBlock||cI.flashLoadTimeout===0){if(cI.useFlashBlock){bm()}bP("waitForever")}else{bK(true)}}else{if(cI.flashLoadTimeout===0){bP("waitForever")}else{bK(true)}}}},cI.flashLoadTimeout)};cq=function(){function g(){ba.remove(bj,"focus",cq)}if(cn||!b6){g();return true}bE=true;cn=true;cI._wD(cs+": Got window focus.");cH=false;bZ();g();return true};bN=function(){var g,h=[];if(cI.useHTML5Audio&&cI.hasHTML5){for(g in cI.audioFormats){if(cI.audioFormats.hasOwnProperty(g)){h.push(g+": "+cI.html5[g]+(!cI.html5[g]&&bo&&cI.flash[g]?" (using flash)":(cI.preferFlash&&cI.flash[g]&&bo?" (preferring flash)":(!cI.html5[g]?" ("+(cI.audioFormats[g].required?"required, ":"")+"and no flash support)":""))))}}cI._wD("-- SoundManager 2: HTML5 support tests ("+cI.html5Test+"): "+h.join(", ")+" --",1)}};bs=function(i){if(ci){return false}if(cI.html5Only){cI._wD("-- SoundManager 2: loaded --");ci=true;cE();b1("onload",true);return true}var g=(cI.useFlashBlock&&cI.flashLoadTimeout&&!cI.getMoviePercent()),h=true,j;if(!g){ci=true;if(bF){j={type:(!bo&&b0?"NO_FLASH":"INIT_TIMEOUT")}}}cI._wD("-- SoundManager 2 "+(bF?"failed to load":"loaded")+" ("+(bF?"security/load error":"OK")+") --",1);if(bF||i){if(cI.useFlashBlock&&cI.oMC){cI.oMC.className=bB()+" "+(cI.getMoviePercent()===null?bX.swfTimedout:bX.swfError)}cJ({type:"ontimeout",error:j,ignoreInit:true});b1("onload",false);cr(j);h=false}else{b1("onload",true)}if(!bF){if(cI.waitForWindowLoad&&!c){bP("waitOnload");ba.add(bj,"load",cE)}else{if(cI.waitForWindowLoad&&c){bP("docLoaded")}cE()}}return h};bT=function(){var h,g=cI.setupOptions;for(h in g){if(g.hasOwnProperty(h)){if(typeof cI[h]==="undefined"){cI[h]=g[h]}else{if(cI[h]!==g[h]){cI.setupOptions[h]=cI[h]}}}}};cy=function(){bP("init");if(ci){bP("didInit");return false}function h(){ba.remove(bj,"load",cI.beginDelayedInit)}if(cI.html5Only){if(!ci){h();cI.enabled=true;bs()}return true}a9();try{bP("flashJS");bf._externalInterfaceTest(false);bQ(true,(cI.flashPollingInterval||(cI.useHighPerformance?10:50)));if(!cI.debugMode){bf._disableDebug()}cI.enabled=true;b1("jstoflash",true);if(!cI.html5Only){ba.add(bj,"unload",b5)}}catch(g){cI._wD("js/flash exception: "+g.toString());b1("jstoflash",false);cr({type:"JS_TO_FLASH_EXCEPTION",fatal:true});bK(true);bs();return false}bs();h();return true};bC=function(){if(cu){return false}cu=true;bT();bG();(function(){var j="sm2-usehtml5audio=",l="sm2-preferflash=",g=null,i=null,h=(typeof console!=="undefined"&&typeof console.log==="function"),k=bh.toLowerCase();if(k.indexOf(j)!==-1){g=(k.charAt(k.indexOf(j)+j.length)==="1");if(h){console.log((g?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}cI.setup({useHTML5Audio:g})}if(k.indexOf(l)!==-1){i=(k.charAt(k.indexOf(l)+l.length)==="1");if(h){console.log((i?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}cI.setup({preferFlash:i})}}());if(!bo&&cI.hasHTML5){cI._wD("SoundManager: No Flash detected"+(!cI.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."));cI.setup({useHTML5Audio:true,preferFlash:false})}cK();cI.html5.usingFlash=b2();b0=cI.html5.usingFlash;bN();if(!bo&&b0){cI._wD("SoundManager: Fatal error: Flash is needed to play some required formats, but is not available.");cI.setup({flashLoadTimeout:1})}if(co.removeEventListener){co.removeEventListener("DOMContentLoaded",bC,false)}a9();return true};cv=function(){if(co.readyState==="complete"){bC();co.detachEvent("onreadystatechange",cv)}return true};bR=function(){c=true;ba.remove(bj,"load",bR)};cM();ba.add(bj,"focus",cq);ba.add(bj,"load",bZ);ba.add(bj,"load",bR);if(co.addEventListener){co.addEventListener("DOMContentLoaded",bC,false)}else{if(co.attachEvent){co.attachEvent("onreadystatechange",cv)}else{b1("onload",false);cr({type:"NO_DOM2_EVENTS",fatal:true})}}if(co.readyState==="complete"){setTimeout(bC,100)}}if(typeof SM2_DEFER==="undefined"||!SM2_DEFER){d=new e()}f.SoundManager=e;f.soundManager=d}(window));