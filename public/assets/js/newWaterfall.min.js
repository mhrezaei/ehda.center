(function(){$.fn.NewWaterfall=function(c){var f={width:360,delay:60,repeatShow:false};var b=$.extend({},f,c);var d=this;var a=function(g){if($(window).scrollTop()+$(window).height()>$(g).offset().top){$(g).addClass("show")}else{if($(window).scrollTop()+$(window).height()<$(g).offset().top){if(b.repeatShow){$(g).removeClass("show")}}}};var e=function(){if(d.length<=0){return}d.css({position:"relative"});var w=$(d).children("li");if(w.length<=0){return}var s=$(d).width();var v=parseInt(s/b.width);if(w.length<v){v=w.length}var u=(s-v*b.width)/2;if(v>0){$(d).removeClass("min");w.css({position:"absolute",width:b.width});var t=0;var q=[];var g=[];for(var n=0;n<w.length;n++){q.push({index:n,bottom:0,height:$(w[n]).height()})}for(var n=0;n<v;n++){g.push([])}for(var n=0;n<w.length;n++){if(n<v){q[n]["bottom"]=q[n]["height"];g[n].push(q[n])}else{var r=0;var k=0;for(var m=0;m<v;m++){var p=g[m][g[m].length-1]["bottom"]+q[n]["height"];if(r==0||p<r){r=p;k=m}}q[n]["bottom"]=r;g[k].push(q[n])}}for(var n=0;n<g.length;n++){for(var m=0;m<g[n].length;m++){$(w[g[n][m]["index"]]).css({left:n*b.width+u,top:g[n][m]["bottom"]-g[n][m]["height"]})}}for(var n=0;n<g.length;n++){var o=g[n][g[n].length-1]["bottom"];if(t<o){t=o}}$(d).css("height",t)}else{w.attr("style","");d.attr("style","");$(d).addClass("min")}for(var n=0;n<w.length;n++){a(w[n])}};e();setInterval(e,b.delay)}})();