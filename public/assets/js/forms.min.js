String.prototype.replaceAll=function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)};$(document).ready(function(){forms_listener()});function forms_listener(){$("form.js").each(function(){var b=$(this).attr("no-ajax");if(b&&b==1){$(this).submit()}else{$(this).removeClass("js");$(this).ajaxForm({dataType:"json",beforeSubmit:forms_validate,success:forms_responde,error:forms_error});$(".form-default").focus()}});$(".form-default").each(function(){$(this).removeClass("form-default");$(this).focus()});$(".atr").each(function(){$(this).removeClass("atl");$(this).on("keyup",function(){forms_autoDirection(this)})});$(".form-numberFormat").each(function(){$(this).removeClass("form-numberFormat");$(this).on("keyup",function(){forms_numberFormat(this)});forms_numberFormat(this)});$(".form-timeFormat").each(function(){$(this).removeClass("form-timeFormat");$(this).on("keyup",function(){forms_timeFormat(this)});forms_timeFormat(this)});$(".form-cardFormat").each(function(){$(this).removeClass("form-cardFormat");$(this).on("keyup",function(){forms_cardFormat(this)});forms_cardFormat(this)});$("textarea.form-autoSize").each(function(){$(this).removeClass("form-autoSize").autogrow()});$(".persian").each(function(){$(this).removeClass("persian");$(this).html(forms_pd($(this).html()))});var a={datapicker:"datepicker",buttonset:"buttonset"};$(".form-datepicker").each(function(){var b=$(this).dataStartsWith(a.datapicker);$(this).removeClass("form-datepicker");$(this).datepicker(b)});$(".datepicker").each(function(){$(this).removeClass("datepicker");var b=new MHR.persianCalendar($(this).attr("id"),{extraInputID:$(this).attr("id")+"_extra",extraInputFormat:"YYYY/MM/DD"})});$(".form-buttonset").each(function(){$(this).buttonset()});$("input.js").each(function(){$(this).removeClass("js");setTimeout($(this).val(),$(this).attr("data-delay"))});if($(".selectpicker").length){$(".selectpicker").selectpicker()}setTimeout("forms_listener()",5)}function forms_validate(b,a,m){var e=a.attr("id");var c=0;var f=new Array;var k=new Array;var l="#"+e+" .form-feed";$("#"+e+" button").prop("disabled",true);$(l).removeClass("alert-success").removeClass("alert-danger").html($(l+"-wait").html()).slideDown();var j=$("#"+e).attr("no-validation");if(j&&j==1){return true}$("#"+e+" :input").each(function(){if(!$(this).prop("disabled")){var t=$(this).val();var p=$(this).attr("name");var w=$(this).attr("error-value");var v=$.inArray(p,k);if(v<0){forms_markError(this,"reset")}var z=$(this).hasClass("form-required");var q=$(this).hasClass("form-number");var B=$(this).hasClass("form-persian");var n=$(this).hasClass("form-english");var r=$(this).hasClass("form-email");var y=$(this).hasClass("form-national");var s=$(this).hasClass("form-mobile");var D=$(this).hasClass("form-phone");var u=$(this).hasClass("form-password");var E=$(this).hasClass("form-datepicker");var A=$(this).hasClass("form-select");var o=$(this).hasClass("form-selectpicker");var C=$(this).hasClass("form-checkbox");var i=$(this).hasClass("form-radio");if(z&&v<0){if(forms_errorIfEmpty(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}if(q&&v<0){if($(this).val().length>0){if(forms_errorIfNotNumber(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(B&&v<0){if($(this).val().length>0){if(forms_errorIfLang(this,"fa")){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(n&&v<0){if($(this).val().length>0){if(forms_errorIfLang(this,"en")){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(r&&v<0){if($(this).val().length>0){if(forms_errorIfNotEmail(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(y&&v<0){if($(this).val().length>0){if(forms_errorIfNotNationalCode(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(s&&v<0){if($(this).val().length>0){if(forms_errorIfNotMobile(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(D&&v<0){if($(this).val().length>0){if(forms_errorIfNotPhone(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(u&&v<0){if($(this).val().length>0){if(forms_errorIfNotVerifyPassWord(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(E&&v<0){if($(this).val().length>0){if(forms_errorIfNotDatePicker(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(i&&v<0){if($(this).hasClass("form-required")){if(forms_errorIfNotCheckedRadio(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(A&&v<0){if($(this).hasClass("form-required")){if(forms_errorIfNotSelect(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}if(o&&v<0){if($(this).hasClass("form-required")&&t<1){forms_markError($(this),"error");if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}if(C&&v<0){if(!$(this).is(":checked")){if(forms_errorIfNotPhone(this)){if(w&&w.length){f.push(w)}if(c<1){$(this).focus()}c++;k.push(p);v=$.inArray(p,k)}}}}});if(typeof window[e+"_validate"]=="function"){var h=window[e+"_validate"](b,a,m);if(h!=0){f.push(h);c++}}if(c>0){$("#"+e+" button").prop("disabled",false);if(f.length){var g="<ul>";for(var d=0;d<f.length;d++){g+="<li>"+f[d]+"</li>"}g+="<ul>";$(l).addClass("alert-danger").html(g)}else{$(l).addClass("alert-danger").html($(l+"-error").html())}return false}else{return true}}function forms_error(d,g,f,c){var b=c.attr("id");var e="";var a=e+" .form-feed";$("#"+b+" button").prop("disabled",false);if(d.status===422){$errors=d.responseJSON;errorsHtml="<ul>";$.each($errors,function(h,i){errorsHtml+="<li>"+i[0]+"</li>"});errorsHtml+="</ul>"}else{errorsHtml=$(a+"-error").html()}$(a).addClass("alert-danger").html(forms_digit_fa(errorsHtml))}function forms_responde(f,g,h,c){var e="#"+c.attr("id");var b=e+" .form-feed";$(e+" button").prop("disabled",false);if(f.ok=="1"){var a="alert-success";var d=f.message;if(!d){d=$(b+"-ok").html()}}else{var a="alert-danger";var d=f.message}if(f.feed_class&&f.feed_class!="no"){var a=f.feed_class}$(b).addClass(a).html(d).show();if(f.refresh==1){forms_delaiedPageRefresh(1)}if(f.modalClose==1&&$(".modal").length){setTimeout(function(){$(".modal").modal("hide")},1000)}if(f.redirect){setTimeout(function(){window.location=f.redirect},f.redirectTime)}if(f.updater){allForms_updater(f.updater)}if(f.form_reset){$(e).trigger("reset")}if(f.feed_timeout){setTimeout(function(){$(b).hide()},f.feed_timeout)}if(f.callback){setTimeout(f.callback,f.redirectTime)}return}function forms_reset(b,a){$counter=0;$(b+" input , "+b+" textarea ").each(function(){if($(this).attr("type")!="hidden"){$counter++;$(this).val("");forms_markError(this,"reset");if($counter==1&&!a){a=$(this).attr("name")}}});$(b+" .form-feed").hide();setTimeout(function(){$(b+" [name="+a+"]").focus()},200)}function forms_errorIfEmpty(b){var a=$(b).attr("maxlength");var c=$(b).attr("minlength");if(!$(b).val()||$(b).val()=="0"){forms_markError(b,"error");return 1}else{if(a&&c){if($(b).val().length>a||$(b).val().length<c){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(a){if($(b).val().length>a){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(c){if($(b).val().length<c){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{forms_markError(b,"success");return 0}}}}}function forms_errorIfNotEmail(a){var b=$(a).val();var c=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!c.test(b)){forms_markError(a,"error");return 1}else{forms_markError(a,"success");return 0}}function forms_errorIfNotNationalCode(a){if(!forms_national_code(forms_digit_en($(a).val()))){forms_markError(a,"error");return 1}else{forms_markError(a,"success");return 0}}function forms_errorIfNotNumber(b){var e=forms_digit_en($(b).val());var c=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var a=$(b).attr("maxlength");var d=$(b).attr("minlength");if((typeof e==="number"||(typeof e==="string"&&c.indexOf(e.slice(-1))===-1))&&e!==""&&!isNaN(e)){if(a&&d){if(e.length>a||e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(a){if(e.length>a){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(d){if(e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}}}}else{forms_markError(b,"error");return 1}}function forms_errorIfNotMobile(b){var e=forms_digit_en($(b).val());var c=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var a=$(b).attr("maxlength");var d=$(b).attr("minlength");if((typeof e==="number"||(typeof e==="string"&&c.indexOf(e.slice(-1))===-1))&&e!==""&&!isNaN(e)&&e[0]==0&&e[1]==9){if(a&&d){if(e.length>a||e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(a){if(e.length>a){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(d){if(e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}}}}else{forms_markError(b,"error");return 1}}function forms_errorIfNotPhone(b){var e=forms_digit_en($(b).val());var c=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var a=$(b).attr("maxlength");var d=$(b).attr("minlength");if((typeof e==="number"||(typeof e==="string"&&c.indexOf(e.slice(-1))===-1))&&e!==""&&!isNaN(e)&&e[0]==0&&e[1]!=9){if(a&&d){if(e.length>a||e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(a){if(e.length>a){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(d){if(e.length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}}}}else{forms_markError(b,"error");return 1}}function forms_errorIfNotVerifyPassWord(b){var a=$(b).attr("maxlength");var c=$(b).attr("minlength");var e=$(b).attr("id");var d="#"+e+"2";if($(b).val()==$(d).val()){if(a&&c){if($(b).val().length>a||$(b).val().length<c){forms_markError(b,"error");forms_markError(d,"error");return 1}else{forms_markError(b,"success");forms_markError(d,"success");return 0}}else{if(a){if($(b).val().length>a){forms_markError(b,"error");forms_markError(d,"error");return 1}else{forms_markError(b,"success");forms_markError(d,"success");return 0}}else{if(c){if($(b).val().length<c){forms_markError(b,"error");forms_markError(d,"error");return 1}else{forms_markError(b,"success");forms_markError(d,"success");return 0}}}}}else{forms_markError(b,"error");forms_markError(d,"error");return 1}}function forms_errorIfLang(b,e){var c=forms_isPersian($(b).val());var a=$(b).attr("maxlength");var d=$(b).attr("minlength");if(c&&e!="fa"){forms_markError(b,"error");return 1}if(!c&&e=="fa"){forms_markError(b,"error");return 1}else{if(a&&d){if($(b).val().length>a||$(b).val().length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(a){if($(b).val().length>a){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}else{if(d){if($(b).val().length<d){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}}}}}function forms_errorIfNotSelect(a){var e=$(a).attr("multiple");var d=[];if(e){var c=$(a).val()+"";c=c.split(",");for(var b=0;b<c.length;b++){d[b]=c[b]}}else{if($(a).val()>0){d[0]=$(a).val()}}if(!d.length){forms_markError(a,"error");return 1}else{forms_markError(a,"success");return 0}}function forms_errorIfNotDatePicker(a){var b=$(a).val();if(!b.isValidJalaliDate()){forms_markError(a,"error");return 1}else{forms_markError(a,"success");return 0}}function forms_errorIfNotCheckedRadio(a){var b=$(a).attr("name");if($('input[type=radio][name="'+b+'"]:checked').length){forms_markError(a,"success");return false}else{forms_markError(a,"error");return true}}function getLocale(){return $("html").attr("lang")}function forms_isPersian(a){var d=/[^\u0600-\u06FF]/;var c=0;for(var b=0;b<a.length;b++){if(a[b].match(d)){c++}}if((c/a.length)>0.6){return false}else{return true}}function forms_markError(a,c){var b=$(a).closest(".form-group");if(c=="success"){b.addClass("has-success").removeClass("has-error")}else{if(c=="null"||c=="reset"){b.removeClass("has-error").removeClass("has-success")}else{b.addClass("has-error").removeClass("has-success")}}}function forms_numberFormat(a){var b=$(a).val();b=forms_digit_en(b.replaceAll(",",""));$(a).val(forms_digit_fa(addCommas(b)))}function forms_timeFormat(a){var b=$(a).val();b=forms_digit_en(b.replaceAll(":",""));if(b.length>4){forms_markError(a,"danger");return}else{forms_markError(a,"reset")}$(a).val(forms_digit_fa(addTimeSeparator(b)))}function forms_cardFormat(a){var b=$(a).val();b=forms_digit_en(b.replaceAll(" - ",""));if(b.length>16){forms_markError(a,"danger");return}else{forms_markError(a,"reset")}$(a).val(forms_digit_fa(addCardSeparator(b)))}function forms_autoDirection(b){return;var d=$(b);var c=["ا","آ","ب","پ","ت","س","ج","چ","ح","خ","د","ذ","ر","ز","ژ","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ک","گ","ل","م","ن","و","ه","ی","ء","1","2","3","4","5","6","7","8","9","0"," "];var a=false;d.on("keyup",function(){var g=d.val();var f=g.substr(0,1);var e=false;var h=0;if(!g){d.attr("dir","rtl");return}for(h=0;h<45;h++){if(c[h]==f){e=true;break}}if(e){d.attr("dir","rtl")}else{d.attr("dir","ltr")}})}function forms_delaiedPageRefresh(a){if(a<1000){a=a*1000}setTimeout(function(){location.reload()},a)}function forms_pd(a){if(!a){return}a=a.replaceAll(/1/g,"۱");a=a.replaceAll(/2/g,"۲");a=a.replaceAll(/3/g,"۳");a=a.replaceAll(/4/g,"۴");a=a.replaceAll(/5/g,"۵");a=a.replaceAll(/6/g,"۶");a=a.replaceAll(/7/g,"۷");a=a.replaceAll(/8/g,"۸");a=a.replaceAll(/9/g,"۹");a=a.replaceAll(/0/g,"۰");return a}function forms_digit_en(d){var e="";for(var b=0;b<d.length;b++){var c=d.charCodeAt(b);if(c>=1776&&c<=1785){var a=c-1728;e=e+String.fromCharCode(a)}else{if(c>=1632&&c<=1641){var a=c-1584;e=e+String.fromCharCode(a)}else{e=e+String.fromCharCode(c)}}}return e}function pd(a){return forms_digit_fa(a)}function ed(a){return forms_digit_en(a)}function ad(a){if(getLocale()=="fa"){return pd(a)}return ed(a)}function ad(a){if($.inArray(getLocale(),["fa","ar"])>-1){return pd(a)}return ed(a)}function forms_digit_fa(d){return forms_pd(d);var e="";for(var b=0;b<d.length;b++){var c=d.charCodeAt(b);if(c>=48&&c<=57){var a=c+1584;e=e+String.fromCharCode(a)}else{e=e+String.fromCharCode(c)}}return e}function forms_national_code(d){if(d.length==10&&!isNaN(d)){var d=d.split("");var c;for(var a=0;a<d.length;a++){if(d[0]>d[a]||d[0]<d[a]){c=1;break}else{c=2}}if(c==1){var b=0;var e=10;for(var a=0;a<=8;a++){b+=d[a]*e;--e}b=b%11;if(b>=0&&b<2){if(b==d["9"]){return true}else{return false}}else{b=11-b;if(b==d["9"]){return true}else{return false}}}else{return false}}else{return false}}function addCommas(b){b+="";x=b.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2}function addTimeSeparator(b){b+="";var a=/(\d+)(\d{2})/;while(a.test(b)){b=b.replace(a,"$1:$2")}return b}function addCardSeparator(b){b+="";var a=/(\d{4})(\d+)/;while(a.test(b)){b=b.replace(a,"$1 - $2")}return b}function forms_log(a){console.log(a)}(function(a){a.fn.autogrow=function(b){return this.filter("textarea").each(function(){var d=this;var g=a(d);var f=g.height();var c=g.hasClass("autogrow-short")?0:parseInt(g.css("lineHeight"))||0;var e=a.extend({preGrowCallback:null,postGrowCallback:null},b);var i=a("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:g.width(),fontSize:g.css("fontSize"),fontFamily:g.css("fontFamily"),fontWeight:g.css("fontWeight"),lineHeight:g.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body);var h=function(k){var m=function(n,q){for(var o=0,p="";o<q;o++){p+=n}return p};var l=d.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&#xa0;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(n){return m("&#xa0;",n.length-1)+" "});if(k&&k.data&&k.data.event==="keydown"&&k.keyCode===13){l+="<br />"}i.css("width",g.width());i.html(l+(c===0?"...":""));var j=Math.max(i.height()+c,f);if(e.preGrowCallback!=null){j=e.preGrowCallback(g,i,j,f)}g.height(j);if(e.postGrowCallback!=null){e.postGrowCallback(g)}};g.change(h).keyup(h).keydown({event:"keydown"},h);a(window).resize(h);h()})}})(jQuery);