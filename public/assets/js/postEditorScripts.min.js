function postsInit(){postDomainToggle()}function postToggleCategories(a){if(a>0){$("#divCategories").slideDown()}}function postTogglePrice(){$("#btnSale,#divSale").slideToggle("fast",function(){if($("#divSale").is(":visible")){$("#txtSalePrice").focus()}else{$(".salePrice").val("")}})}function postCalcSale(h){var e=$("#txtPrice");var d=$("#txtSalePercent");var g=$("#txtSalePrice");var f=parseInt(ed(e.val().replaceAll(",","")));var c=parseInt(ed(g.val()).replaceAll(",",""));var b=parseInt(ed(d.val()).replaceAll(",",""));if(h=="price"){h="sale"}if(h=="sale"){if(!f||f==0||!c||c==0||c>f){d.val("")}else{var a=Math.round((f-c)*100/f);d.val(pd(a.toString()))}}if(h=="percent"){if(!f||f==0||!b||b==0||b>100){g.val("")}else{var a=Math.round((100-b)*f/100);g.val(pd(addCommas(a.toString())))}}}function postToggleTitle2(){var a=$("#txtTitle2");$("#lblTitle2,#txtTitle2-container").toggle();if(a.is(":visible")){a.focus()}else{a.val("")}}function postToggleSchedule(b){var c=$("#divSchedule");var a=$("#lnkSchedule");var e=$("#txtPublishDate");var d=$("#txtScheduleFlag");if(!b){forms_log("mood="+b);if($(c).is(":visible")){b="hide"}else{b="show"}}switch(b){case"show":c.slideDown("fast");d.val("1");a.hide();e.focus();break;case"hide":c.slideUp("fast");a.show();e.val("");d.val("");$("#cmbPublishDate").val("08:00");$(".selectpicker").selectpicker("refresh");break}return b}function postsAction(a,b){forms_log("action: "+a);switch(a){case"adjust_publish_time":postToggleSchedule("show");break;case"refer_back":modalForm("modalPostReject","1");break;case"submit_reject":$(".modal").modal("hide");$("#txtModerateNote").val($("#txtModerateNote2").val());$("#btnReject").click();break;case"delete":modalForm("modalPostDeleteWarning","1");break;case"unpublish":modalForm("modalPostUnpublishWarning","1");break;case"send_for_approval":$("#btnApproval").click();break;case"check_slug":$divFeedback=$("#divSlugFeedback");$divFeedback.html("...").addClass("loading");forms_log("["+$("#txtSlug").val()+"]");$.ajax({url:url("manage/posts/check_slug/"+$("#txtId").val()+"/"+$("#txtType").val()+"/"+$("#txtLocale").val()+"/"+$("#txtSlug").val()+" /p"),cache:false}).done(function(c){$($divFeedback).html(c);$($divFeedback).removeClass("loading")});break;case"refer_to":masterModal(url("manage/posts/act/"+b+"/owner/1"));break}}function featuredImage(a){switch(a){case"inserted":$("#divFeaturedImage").slideDown();$("#btnFeaturedImage").addClass("btn-default").removeClass("btn-primary");break;case"deleted":$("#divFeaturedImage").slideUp("fast");$("#txtFeaturedImage").val("");$("#imgFeaturedImage").attr("src","");$("#btnFeaturedImage").addClass("btn-primary").removeClass("btn-default");break}}function postPhotoAdded(){var b=url($("#txtAddPhoto").val());var a=$("#divNewPhoto").html();var e=$("#spnPhotoCount");var d=$("#txtLastKey");var c=parseInt(d.val())+1;var f="#divPhoto-"+c.toString();var g=parseInt(forms_digit_en(e.html()))+1;d.val(c);e.html(forms_digit_fa(g.toString()));a=a.replace("NEW",c);a=a.replace("NEW",c);a=a.replace("NEW",c);a=a.replace("NEW",c);$("#divPhotos").append(a);$(f+" input.-src").val(b);$(f+" input.-label").focus();$(f+" img").attr("src",b);$(f).slideDown()}function postPhotoRemoved(b,a){let div_id="divPhoto-"+b;$("#"+div_id).attr("data-src","manage/posts/act/0/editor-album2-remove/"+a).slideUp("fast");divReload(div_id)}function _postPhotoRemoved(c){c.parent().parent().slideUp().html("");var a=$("#spnPhotoCount");var b=parseInt(forms_digit_en(a.html()))-1;a.html(forms_digit_fa(b.toString()))}function postFileCounterUpdate(a){let $selector=$("#spnFileCount");let current_value=parseInt(forms_digit_en($selector.html()));forms_log(current_value);if(a=="-"){$selector.html(forms_digit_fa(Math.max(0,current_value-1).toString()))}else{if(a=="+"){$selector.html(forms_digit_fa((current_value+1).toString()))}else{$selector.html(forms_digit_fa(a))}}}function postFormChange(){var a=$("#txtChangeWarning");if(a.val()=="1"){modalForm("modalSuggestCopy",1);a.val("0")}$("#txtChangeDetected").val("1")}function postDomainToggle(){combo_value=$("#cmbDomain").val();$checkbox=$("#chkReflectInGlobal");if(combo_value=="global"){$checkbox.hide()}else{$checkbox.slideDown("fast")}}function filemanagerUploadFinish(a){let $last_key_input=$("#txtLastKey");while(a.length){let counter=0;let result=$last_key_input.val()+"-";let current=a.splice(0,50);$.each(current,function(b,c){if(c.status=="error"){return false}result+=$.parseJSON(c.xhr.response).file+"-";counter++});$last_key_input.val(parseInt($last_key_input.val())+counter);divReload("divNewFiles",result)}refreshDropzone(dropzone_object)};