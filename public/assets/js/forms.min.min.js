String.prototype.replaceAll=function(e,d){var f=this;return f.replace(new RegExp(e,"g"),d)};$(document).ready(function(){forms_listener()});function forms_listener(){$("form.js").each(function(){var a=$(this).attr("no-ajax");if(a&&a==1){$(this).submit()}else{$(this).removeClass("js");$(this).ajaxForm({dataType:"json",beforeSubmit:forms_validate,success:forms_responde,error:forms_error});$(".form-default").focus()}});$(".form-default").each(function(){$(this).removeClass("form-default");$(this).focus()});$(".atr").each(function(){$(this).removeClass("atl");$(this).on("keyup",function(){forms_autoDirection(this)})});$(".form-numberFormat").each(function(){$(this).removeClass("form-numberFormat");$(this).on("keyup",function(){forms_numberFormat(this)});forms_numberFormat(this)});$(".form-timeFormat").each(function(){$(this).removeClass("form-timeFormat");$(this).on("keyup",function(){forms_timeFormat(this)});forms_timeFormat(this)});$(".form-cardFormat").each(function(){$(this).removeClass("form-cardFormat");$(this).on("keyup",function(){forms_cardFormat(this)});forms_cardFormat(this)});$("textarea.form-autoSize").each(function(){$(this).removeClass("form-autoSize").autogrow()});$(".persian").each(function(){$(this).removeClass("persian");$(this).html(forms_pd($(this).html()))});var b={datapicker:"datepicker",buttonset:"buttonset"};$(".form-datepicker").each(function(){var a=$(this).dataStartsWith(b.datapicker);$(this).removeClass("form-datepicker");$(this).datepicker(a)});$(".datepicker").each(function(){$(this).removeClass("datepicker");var a=new MHR.persianCalendar($(this).attr("id"),{extraInputID:$(this).attr("id")+"_extra",extraInputFormat:"YYYY/MM/DD"})});$(".form-buttonset").each(function(){$(this).buttonset()});$("input.js").each(function(){$(this).removeClass("js");setTimeout($(this).val(),$(this).attr("data-delay"))});if($(".selectpicker").length){$(".selectpicker").selectpicker()}setTimeout("forms_listener()",5)}function forms_validate(w,y,i){var t=y.attr("id");var v=0;var s=new Array;var o=new Array;var n="#"+t+" .form-feed";$("#"+t+" button").prop("disabled",true);$(n).removeClass("alert-success").removeClass("alert-danger").html($(n+"-wait").html()).slideDown();var p=$("#"+t).attr("no-validation");if(p&&p==1){return true}$("#"+t+" :input").each(function(){console.log($(this));if(!$(this).prop("disabled")){var g=$(this).val();var H=$(this).attr("name");var c=$(this).attr("error-value");var d=$.inArray(H,o);if(d<0){forms_markError(this,"reset")}var a=$(this).hasClass("form-required");var F=$(this).hasClass("form-number");var m=$(this).hasClass("form-persian");var J=$(this).hasClass("form-english");var l=$(this).hasClass("form-email");var b=$(this).hasClass("form-national");var h=$(this).hasClass("form-mobile");var j=$(this).hasClass("form-phone");var e=$(this).hasClass("form-password");var f=$(this).hasClass("form-datepicker");var G=$(this).hasClass("form-select");var I=$(this).hasClass("form-selectpicker");var k=$(this).hasClass("form-checkbox");var K=$(this).hasClass("form-radio");if(a&&d<0){if(forms_errorIfEmpty(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}if(F&&d<0){if($(this).val().length>0){if(forms_errorIfNotNumber(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(m&&d<0){if($(this).val().length>0){if(forms_errorIfLang(this,"fa")){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(J&&d<0){if($(this).val().length>0){if(forms_errorIfLang(this,"en")){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(l&&d<0){if($(this).val().length>0){if(forms_errorIfNotEmail(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(b&&d<0){if($(this).val().length>0){if(forms_errorIfNotNationalCode(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(h&&d<0){if($(this).val().length>0){if(forms_errorIfNotMobile(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(j&&d<0){if($(this).val().length>0){if(forms_errorIfNotPhone(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(e&&d<0){if($(this).val().length>0){if(forms_errorIfNotVerifyPassWord(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(f&&d<0){if($(this).val().length>0){if(forms_errorIfNotDatePicker(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(K&&d<0){if($(this).hasClass("form-required")){if(forms_errorIfNotCheckedRadio(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(G&&d<0){if($(this).hasClass("form-required")){if(forms_errorIfNotSelect(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(I&&d<0){if($(this).hasClass("form-required")&&g<1){forms_markError($(this),"error");if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}if(k&&d<0){if(!$(this).is(":checked")){if(forms_errorIfNotPhone(this)){if(c&&c.length){s.push(c)}if(v<1){$(this).focus()}v++;o.push(H);d=$.inArray(H,o)}}}if(d<0){forms_markError(this,"success")}}});if(typeof window[t+"_validate"]=="function"){var q=window[t+"_validate"](w,y,i);if(q!=0){s.push(q);v++}}if(v>0){$("#"+t+" button").prop("disabled",false);if(s.length){var r="<ul>";for(var u=0;u<s.length;u++){r+="<li>"+s[u]+"</li>"}r+="<ul>";$(n).addClass("alert-danger").html(r)}else{$(n).addClass("alert-danger").html($(n+"-error").html())}return false}else{return true}}function forms_error(m,j,k,n){var h=n.attr("id");var l="";var i=l+" .form-feed";$("#"+h+" button").prop("disabled",false);if(m.status===422){$errors=m.responseJSON;errorsHtml="<ul>";$.each($errors,function(b,a){errorsHtml+="<li>"+a[0]+"</li>"});errorsHtml+="</ul>"}else{errorsHtml=$(i+"-error").html()}$(i).addClass("alert-danger").html(forms_digit_fa(errorsHtml))}function forms_responde(m,l,k,p){var n="#"+p.attr("id");var i=n+" .form-feed";$(n+" button").prop("disabled",false);if(m.ok=="1"){var j="alert-success";var o=m.message;if(!o){o=$(i+"-ok").html()}}else{var j="alert-danger";var o=m.message}if(m.feed_class&&m.feed_class!="no"){var j=m.feed_class}$(i).addClass(j).html(o).show();if(m.refresh==1){forms_delaiedPageRefresh(1)}if(m.modalClose==1&&$(".modal").length){setTimeout(function(){$(".modal").modal("hide")},1000)}if(m.redirect){setTimeout(function(){window.location=m.redirect},m.redirectTime)}if(m.updater){allForms_updater(m.updater)}if(m.form_reset){$(n).trigger("reset")}if(m.feed_timeout){setTimeout(function(){$(i).hide()},m.feed_timeout)}if(m.callback){setTimeout(m.callback,m.redirectTime)}return}function forms_reset(c,d){$counter=0;$(c+" input , "+c+" textarea ").each(function(){if($(this).attr("type")!="hidden"){$counter++;$(this).val("");forms_markError(this,"reset");if($counter==1&&!d){d=$(this).attr("name")}}});$(c+" .form-feed").hide();setTimeout(function(){$(c+" [name="+d+"]").focus()},200)}function forms_errorIfEmpty(d){var e=$(d).attr("maxlength");var f=$(d).attr("minlength");if(!$(d).val()||$(d).val()=="0"){forms_markError(d,"error");return 1}else{if(e&&f){if($(d).val().length>e||$(d).val().length<f){forms_markError(d,"error");return 1}else{forms_markError(d,"success");return 0}}else{if(e){if($(d).val().length>e){forms_markError(d,"error");return 1}else{forms_markError(d,"success");return 0}}else{if(f){if($(d).val().length<f){forms_markError(d,"error");return 1}else{forms_markError(d,"success");return 0}}else{forms_markError(d,"success");return 0}}}}}function forms_errorIfNotEmail(e){var d=$(e).val();var f=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(!f.test(d)){forms_markError(e,"error");return 1}else{forms_markError(e,"success");return 0}}function forms_errorIfNotNationalCode(b){if(!forms_national_code(forms_digit_en($(b).val()))){forms_markError(b,"error");return 1}else{forms_markError(b,"success");return 0}}function forms_errorIfNotNumber(f){var h=forms_digit_en($(f).val());var j=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var g=$(f).attr("maxlength");var i=$(f).attr("minlength");if((typeof h==="number"||(typeof h==="string"&&j.indexOf(h.slice(-1))===-1))&&h!==""&&!isNaN(h)){if(g&&i){if(h.length>g||h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(g){if(h.length>g){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(i){if(h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}}}}else{forms_markError(f,"error");return 1}}function forms_errorIfNotMobile(f){var h=forms_digit_en($(f).val());var j=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var g=$(f).attr("maxlength");var i=$(f).attr("minlength");if((typeof h==="number"||(typeof h==="string"&&j.indexOf(h.slice(-1))===-1))&&h!==""&&!isNaN(h)&&h[0]==0&&h[1]==9){if(g&&i){if(h.length>g||h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(g){if(h.length>g){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(i){if(h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}}}}else{forms_markError(f,"error");return 1}}function forms_errorIfNotPhone(f){var h=forms_digit_en($(f).val());var j=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";var g=$(f).attr("maxlength");var i=$(f).attr("minlength");if((typeof h==="number"||(typeof h==="string"&&j.indexOf(h.slice(-1))===-1))&&h!==""&&!isNaN(h)&&h[0]==0&&h[1]!=9){if(g&&i){if(h.length>g||h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(g){if(h.length>g){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(i){if(h.length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}}}}else{forms_markError(f,"error");return 1}}function forms_errorIfNotVerifyPassWord(f){var g=$(f).attr("maxlength");var j=$(f).attr("minlength");var h=$(f).attr("id");var i="#"+h+"2";if($(f).val()==$(i).val()){if(g&&j){if($(f).val().length>g||$(f).val().length<j){forms_markError(f,"error");forms_markError(i,"error");return 1}else{forms_markError(f,"success");forms_markError(i,"success");return 0}}else{if(g){if($(f).val().length>g){forms_markError(f,"error");forms_markError(i,"error");return 1}else{forms_markError(f,"success");forms_markError(i,"success");return 0}}else{if(j){if($(f).val().length<j){forms_markError(f,"error");forms_markError(i,"error");return 1}else{forms_markError(f,"success");forms_markError(i,"success");return 0}}}}}else{forms_markError(f,"error");forms_markError(i,"error");return 1}}function forms_errorIfLang(f,h){var j=forms_isPersian($(f).val());var g=$(f).attr("maxlength");var i=$(f).attr("minlength");if(j&&h!="fa"){forms_markError(f,"error");return 1}if(!j&&h=="fa"){forms_markError(f,"error");return 1}else{if(g&&i){if($(f).val().length>g||$(f).val().length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(g){if($(f).val().length>g){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}else{if(i){if($(f).val().length<i){forms_markError(f,"error");return 1}else{forms_markError(f,"success");return 0}}}}}}function forms_errorIfNotSelect(g){var h=$(g).attr("multiple");var i=[];if(h){var j=$(g).val()+"";j=j.split(",");for(var f=0;f<j.length;f++){i[f]=j[f]}}else{if($(g).val()>0){i[0]=$(g).val()}}if(!i.length){forms_markError(g,"error");return 1}else{forms_markError(g,"success");return 0}}function forms_errorIfNotDatePicker(d){var c=$(d).val();if(!c.isValidJalaliDate()){forms_markError(d,"error");return 1}else{forms_markError(d,"success");return 0}}function forms_errorIfNotCheckedRadio(d){var c=$(d).attr("name");if($('input[type=radio][name="'+c+'"]:checked').length){forms_markError(d,"success");return false}else{forms_markError(d,"error");return true}}function getLocale(){return $("html").attr("lang")}function forms_isPersian(f){var g=/[^\u0600-\u06FF]/;var h=0;for(var e=0;e<f.length;e++){if(f[e].match(g)){h++}}if((h/f.length)>0.6){return false}else{return true}}function forms_markError(e,f){var d=$(e).closest(".form-group");if(f=="success"){d.addClass("has-success").removeClass("has-error")}else{if(f=="null"||f=="reset"){d.removeClass("has-error").removeClass("has-success")}else{d.addClass("has-error").removeClass("has-success")}}}function forms_numberFormat(d){var c=$(d).val();c=forms_digit_en(c.replaceAll(",",""));$(d).val(forms_digit_fa(addCommas(c)))}function forms_timeFormat(d){var c=$(d).val();c=forms_digit_en(c.replaceAll(":",""));if(c.length>4){forms_markError(d,"danger");return}else{forms_markError(d,"reset")}$(d).val(forms_digit_fa(addTimeSeparator(c)))}function forms_cardFormat(d){var c=$(d).val();c=forms_digit_en(c.replaceAll(" - ",""));if(c.length>16){forms_markError(d,"danger");return}else{forms_markError(d,"reset")}$(d).val(forms_digit_fa(addCardSeparator(c)))}function forms_autoDirection(e){return;var g=$(e);var h=["ا","آ","ب","پ","ت","س","ج","چ","ح","خ","د","ذ","ر","ز","ژ","س","ش","ص","ض","ط","ظ","ع","غ","ف","ق","ک","گ","ل","م","ن","و","ه","ی","ء","1","2","3","4","5","6","7","8","9","0"," "];var f=false;g.on("keyup",function(){var b=g.val();var c=b.substr(0,1);var d=false;var a=0;if(!b){g.attr("dir","rtl");return}for(a=0;a<45;a++){if(h[a]==c){d=true;break}}if(d){g.attr("dir","rtl")}else{g.attr("dir","ltr")}})}function forms_delaiedPageRefresh(b){if(b<1000){b=b*1000}setTimeout(function(){location.reload()},b)}function forms_pd(b){if(!b){return}b=b.replaceAll(/1/g,"۱");b=b.replaceAll(/2/g,"۲");b=b.replaceAll(/3/g,"۳");b=b.replaceAll(/4/g,"۴");b=b.replaceAll(/5/g,"۵");b=b.replaceAll(/6/g,"۶");b=b.replaceAll(/7/g,"۷");b=b.replaceAll(/8/g,"۸");b=b.replaceAll(/9/g,"۹");b=b.replaceAll(/0/g,"۰");return b}function forms_digit_en(i){var h="";for(var f=0;f<i.length;f++){var j=i.charCodeAt(f);if(j>=1776&&j<=1785){var g=j-1728;h=h+String.fromCharCode(g)}else{if(j>=1632&&j<=1641){var g=j-1584;h=h+String.fromCharCode(g)}else{h=h+String.fromCharCode(j)}}}return h}function pd(b){return forms_digit_fa(b)}function ed(b){return forms_digit_en(b)}function ad(b){if(getLocale()=="fa"){return pd(b)}return ed(b)}function ad(b){if($.inArray(getLocale(),["fa","ar"])>-1){return pd(b)}return ed(b)}function forms_digit_fa(i){return forms_pd(i);var h="";for(var f=0;f<i.length;f++){var j=i.charCodeAt(f);if(j>=48&&j<=57){var g=j+1584;h=h+String.fromCharCode(g)}else{h=h+String.fromCharCode(j)}}return h}function forms_national_code(i){if(i.length==10&&!isNaN(i)){var i=i.split("");var j;for(var g=0;g<i.length;g++){if(i[0]>i[g]||i[0]<i[g]){j=1;break}else{j=2}}if(j==1){var f=0;var h=10;for(var g=0;g<=8;g++){f+=i[g]*h;--h}f=f%11;if(f>=0&&f<2){if(f==i["9"]){return true}else{return false}}else{f=11-f;if(f==i["9"]){return true}else{return false}}}else{return false}}else{return false}}function addCommas(c){c+="";x=c.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var d=/(\d+)(\d{3})/;while(d.test(x1)){x1=x1.replace(d,"$1,$2")}return x1+x2}function addTimeSeparator(c){c+="";var d=/(\d+)(\d{2})/;while(d.test(c)){c=c.replace(d,"$1:$2")}return c}function addCardSeparator(c){c+="";var d=/(\d{4})(\d+)/;while(d.test(c)){c=c.replace(d,"$1 - $2")}return c}function forms_log(b){console.log(b)}(function(b){b.fn.autogrow=function(a){return this.filter("textarea").each(function(){var o=this;var l=b(o);var m=l.height();var p=l.hasClass("autogrow-short")?0:parseInt(l.css("lineHeight"))||0;var n=b.extend({preGrowCallback:null,postGrowCallback:null},a);var j=b("<div></div>").css({position:"absolute",top:-10000,left:-10000,width:l.width(),fontSize:l.css("fontSize"),fontFamily:l.css("fontFamily"),fontWeight:l.css("fontWeight"),lineHeight:l.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body);var k=function(e){var c=function(r,g){for(var i=0,h="";i<g;i++){h+=r}return h};var d=o.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n$/,"<br/>&#xa0;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(g){return c("&#xa0;",g.length-1)+" "});if(e&&e.data&&e.data.event==="keydown"&&e.keyCode===13){d+="<br />"}j.css("width",l.width());j.html(d+(p===0?"...":""));var f=Math.max(j.height()+p,m);if(n.preGrowCallback!=null){f=n.preGrowCallback(l,j,f,m)}l.height(f);if(n.postGrowCallback!=null){n.postGrowCallback(l)}};l.change(k).keyup(k).keydown({event:"keydown"},k);b(window).resize(k);k()})}})(jQuery);