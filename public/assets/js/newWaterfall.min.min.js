(function(){$.fn.NewWaterfall=function(l){var i={width:360,delay:60,repeatShow:false};var g=$.extend({},i,l);var k=this;var h=function(a){if($(window).scrollTop()+$(window).height()>$(a).offset().top){$(a).addClass("show")}else{if($(window).scrollTop()+$(window).height()<$(a).offset().top){if(g.repeatShow){$(a).removeClass("show")}}}};var j=function(){if(k.length<=0){return}k.css({position:"relative"});var z=$(k).children("li");if(z.length<=0){return}var D=$(k).width();var A=parseInt(D/g.width);if(z.length<A){A=z.length}var B=(D-A*g.width)/2;if(A>0){$(k).removeClass("min");z.css({position:"absolute",width:g.width});var C=0;var b=[];var y=[];for(var e=0;e<z.length;e++){b.push({index:e,bottom:0,height:$(z[e]).height()})}for(var e=0;e<A;e++){y.push([])}for(var e=0;e<z.length;e++){if(e<A){b[e]["bottom"]=b[e]["height"];y[e].push(b[e])}else{var a=0;var x=0;for(var f=0;f<A;f++){var c=y[f][y[f].length-1]["bottom"]+b[e]["height"];if(a==0||c<a){a=c;x=f}}b[e]["bottom"]=a;y[x].push(b[e])}}for(var e=0;e<y.length;e++){for(var f=0;f<y[e].length;f++){$(z[y[e][f]["index"]]).css({left:e*g.width+B,top:y[e][f]["bottom"]-y[e][f]["height"]})}}for(var e=0;e<y.length;e++){var d=y[e][y[e].length-1]["bottom"];if(C<d){C=d}}$(k).css("height",C)}else{z.attr("style","");k.attr("style","");$(k).addClass("min")}for(var e=0;e<z.length;e++){h(z[e])}};j();setInterval(j,g.delay)}})();